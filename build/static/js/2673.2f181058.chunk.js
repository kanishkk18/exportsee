"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[2673],{22876:(e,s,a)=>{a(19488),a(65043),a(47503),a(14731),a(89849),a(79621),a(97508),a(84066),a(70579)},49201:(e,s,a)=>{a(19488),a(65043),a(47503),a(89849),a(79621),a(70579)},52673:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var r=a(65043),t=a(73216),l=a(35475),n=a(14034),i=a(4450),o=a(85376),d=a(22554),c=a(79621),m=a(88031),u=a(17368),h=a(34960),x=(a(49201),a(22876),a(63516)),p=a(80899),v=a(57360),j=a(78510),f=a(67682),S=a(19488),b=a(43017),N=a(97508),g=a(70579);const y=e=>{const{allData:s,advanceSearch:a,setAdvanceSearch:r,isLoding:t,setDisplaySearchData:l,setSearchbox:n}=e,o=(0,N.wA)(),c=p.Ik({firstName:p.Yj(),username:p.Yj().email("User Email is invalid"),lastName:p.Yj()}),m=(0,x.Wx)({initialValues:{firstName:"",username:"",lastName:""},validationSchema:c,onSubmit:(e,a)=>{let{resetForm:t}=a;o((0,b.gB)(e)),o((0,b.DW)({values:e,allData:s,type:"Users"})),t();const i=[{name:["firstName"],value:e.firstName},{name:["lastName"],value:e.lastName},{name:["username"],value:e.username}];o((0,b.Tr)(i.filter((e=>e.value)))),l(!0),r(!1),n("")}}),{errors:u,touched:h,values:y,handleBlur:C,handleChange:I,handleSubmit:w,resetForm:z,dirty:D}=m;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(v.aF,{onClose:()=>{r(!1),z()},isOpen:a,isCentered:!0,children:[(0,g.jsx)(v.mH,{}),(0,g.jsxs)(v.$m,{children:[(0,g.jsx)(v.rQ,{children:"Advance Search"}),(0,g.jsx)(v.s_,{onClick:()=>{r(!1),z()}}),(0,g.jsx)(v.cw,{children:(0,g.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"First Name"}),(0,g.jsx)(f.Input,{fontSize:"sm",onChange:I,onBlur:C,value:null===y||void 0===y?void 0:y.firstName,name:"firstName",placeholder:"Enter First Name",fontWeight:"500"}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.firstName&&h.firstName&&u.firstName]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Last Name"}),(0,g.jsx)(f.Input,{fontSize:"sm",onChange:I,onBlur:C,value:null===y||void 0===y?void 0:y.lastName,name:"lastName",placeholder:"Enter Last Name",fontWeight:"500"}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.lastName&&h.lastName&&u.lastName]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(j.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Email Id"}),(0,g.jsx)(f.Input,{fontSize:"sm",onChange:I,onBlur:C,value:null===y||void 0===y?void 0:y.username,name:"username",placeholder:"Enter User Name",fontWeight:"500"}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",u.username&&h.username&&u.username]})]})]})}),(0,g.jsxs)(v.jl,{children:[(0,g.jsx)(d.Button,{size:"sm",variant:"brand",mr:2,onClick:w,disabled:!(!t&&D),children:t?(0,g.jsx)(S.A,{}):"Search"}),(0,g.jsx)(d.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>z(),children:"Clear"})]})]})]})})};var C=a(48177),I=a(66854);const w=()=>{const[e,s]=(0,r.useState)(!1),[a,x]=(0,r.useState)(!1),[p,v]=(0,r.useState)({}),[j,f]=(0,r.useState)(!1),[S,b]=(0,r.useState)(),[N,w]=(0,r.useState)(!1),[z,D]=(0,r.useState)([]),[W,A]=(0,r.useState)(!1),[B,E]=(0,r.useState)([]),[F,k]=(0,r.useState)(""),T=(0,t.Zp)(),[L,G]=(0,r.useState)(!1),[O,P]=(0,r.useState)([]),[V,_]=(0,r.useState)(!1),[U,H]=(0,r.useState)([]),[R,Y]=(0,r.useState)(""),$=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Email Id",accessor:"username",cell:e=>{var s;return(0,g.jsx)(l.N_,{to:`/userView/${null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.values._id}`,children:(0,g.jsx)(i.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})}},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Role",accessor:"role"},{Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{var s;let{row:a}=e;return(0,g.jsx)(i.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,g.jsxs)(o.W1,{isLazy:!0,children:[(0,g.jsx)(o.IU,{children:(0,g.jsx)(u.txp,{})}),(0,g.jsxs)(o.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(0,g.jsx)(o.Dr,{py:2.5,onClick:()=>{v(null===a||void 0===a?void 0:a.original),f(!0),b(null===a||void 0===a?void 0:a.original._id),Y("edit")},icon:(0,g.jsx)(n.EditIcon,{mb:1,fontSize:15}),children:"Edit"}),(0,g.jsx)(o.Dr,{py:2.5,color:"green",onClick:()=>T(`/userView/${null===a||void 0===a?void 0:a.values._id}`),icon:(0,g.jsx)(n.ViewIcon,{mb:1,fontSize:15}),children:"View"}),"superAdmin"===(null===a||void 0===a||null===(s=a.original)||void 0===s?void 0:s.role)?"":(0,g.jsx)(o.Dr,{py:2.5,color:"red",onClick:()=>{D([null===a||void 0===a?void 0:a.original._id]),w(!0)},icon:(0,g.jsx)(n.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})})}}],J=async()=>{var e;G(!0);let s=await(0,c.x4)("api/user/");P(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.user),G(!1)};return(0,r.useEffect)((()=>{J()}),[e]),(0,g.jsxs)("div",{children:[(0,g.jsx)(m.A,{title:"Users",isLoding:L,columnData:null!==$&&void 0!==$?$:[],allData:null!==O&&void 0!==O?O:[],tableData:V?U:O,searchDisplay:V,setSearchDisplay:_,searchedDataOut:U,setSearchedDataOut:H,tableCustomFields:[],access:{create:!0,edit:!0,delete:!0,view:!0},onOpen:()=>{Y("add"),f(!0)},selectedValues:z,setSelectedValues:D,setDelete:w,BackButton:(0,g.jsx)(d.Button,{onClick:()=>T("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,g.jsx)(h.m6W,{}),ml:2,children:"Back"}),AdvanceSearch:(0,g.jsx)(d.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,g.jsx)(n.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>A(!0),children:"Advance Search"}),getTagValuesOutSide:B,searchboxOutside:F,setGetTagValuesOutside:E,setSearchboxOutside:k,handleSearchType:"UsersSearch"}),(0,g.jsx)(I.A,{isOpen:j,onClose:()=>{f(!1)},data:p,selectedId:S,userAction:R,setUserAction:Y,fetchData:J}),(0,g.jsx)(C.A,{isOpen:N,onClose:()=>w(!1),type:"User",handleDeleteData:async()=>{try{G(!0),200===(await(0,c.Vn)("api/user/deleteMany",z)).status&&(D([]),w(!1),s((e=>!e)))}catch(e){console.log(e)}finally{G(!1)}},ids:"",selectedValues:z}),(0,g.jsx)(y,{advanceSearch:W,setAdvanceSearch:A,setSearchedData:H,setDisplaySearchData:_,allData:null!==O&&void 0!==O?O:[],setAction:s,setGetTagValues:E,setSearchbox:k})]})}},66854:(e,s,a)=>{a.d(s,{A:()=>b});var r=a(65043),t=a(57360),l=a(22554),n=a(4450),i=a(78510),o=a(67682),d=a(84626),c=a(3458),m=a(14034),u=a(27149),h=a(22285),x=a(63516),p=a(47503),v=a(89849),j=a(79621),f=a(19488),S=a(70579);const b=e=>{const{onClose:s,isOpen:a,setAction:b,data:N,userAction:g,userData:y,selectedId:C,fetchData:I,setUserAction:w}=e,[z,D]=(0,r.useState)(!1),[W,A]=r.useState(!1),B={firstName:"add"===g?"":null===N||void 0===N?void 0:N.firstName,lastName:"add"===g?"":null===N||void 0===N?void 0:N.lastName,username:"add"===g?"":null===N||void 0===N?void 0:N.username,phoneNumber:"add"===g?"":null===N||void 0===N?void 0:N.phoneNumber,password:"add"===g?"":null===N||void 0===N?void 0:N.password,passwordExpirationPeriod:"add"===g?"3days":null===N||void 0===N?void 0:N.passwordExpirationPeriod},E=JSON.parse(window.localStorage.getItem("user")),F=(0,x.Wx)({initialValues:B,validationSchema:v.vJ,enableReinitialize:!0,onSubmit:e=>{_()}}),{errors:k,touched:T,values:L,handleBlur:G,handleChange:O,handleSubmit:P,resetForm:V}=F,_=async()=>{if("add"===g)try{D(!0);let a=await(0,j.d_)("api/user/register",L);var e;if(a&&200===a.status)s(),V(),b((e=>!e)),w("");else p.oR.error(null===(e=a.response.data)||void 0===e?void 0:e.message)}catch(r){console.log(r)}finally{D(!1)}else if("edit"===g)try{D(!0);let e=await(0,j.yP)(`api/user/edit/${C}`,L);if(e&&200===e.status){I();let e=y;(null===E||void 0===E?void 0:E._id)===C&&(e&&"object"===typeof e&&(e={...e,firstName:null===L||void 0===L?void 0:L.firstName,lastName:null===L||void 0===L?void 0:L.lastName,passwordExpirationPeriod:null===L||void 0===L?void 0:L.passwordExpirationPeriod}),localStorage.setItem("user",JSON.stringify(e))),s(),w(""),b((e=>!e))}else{var a;p.oR.error(null===(a=e.response.data)||void 0===a?void 0:a.message)}}catch(r){console.log(r)}finally{D(!1)}};return(0,S.jsxs)(t.aF,{isOpen:a,isCentered:!0,children:[(0,S.jsx)(t.mH,{}),(0,S.jsxs)(t.$m,{children:[(0,S.jsxs)(t.rQ,{justifyContent:"space-between",display:"flex",children:["add"===g?"Add":"Edit"," User",(0,S.jsx)(l.IconButton,{onClick:s,icon:(0,S.jsx)(m.CloseIcon,{})})]}),(0,S.jsx)(t.cw,{children:(0,S.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["First Name",(0,S.jsx)(n.Text,{color:"red",children:"*"})]}),(0,S.jsx)(o.Input,{fontSize:"sm",onChange:O,onBlur:G,value:L.firstName,name:"firstName",placeholder:"First Name",fontWeight:"500",borderColor:k.firstName&&T.firstName?"red.300":null}),(0,S.jsx)(n.Text,{mb:"10px",color:"red",children:k.firstName&&T.firstName&&k.firstName})]}),(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Last Name"}),(0,S.jsx)(o.Input,{fontSize:"sm",onChange:O,onBlur:G,value:L.lastName,name:"lastName",placeholder:"Last Name",fontWeight:"500",borderColor:k.lastName&&T.lastName?"red.300":null}),(0,S.jsx)(n.Text,{mb:"10px",color:"red",children:k.lastName&&T.lastName&&k.lastName})]}),(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Email",(0,S.jsx)(n.Text,{color:"red",children:"*"})]}),(0,S.jsx)(o.Input,{fontSize:"sm",type:"email",onChange:O,onBlur:G,value:L.username,name:"username",placeholder:"Email Address",fontWeight:"500",borderColor:k.username&&T.username?"red.300":null}),(0,S.jsx)(n.Text,{mb:"10px",color:"red",children:k.username&&T.username&&k.username})]}),(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Phone Number",(0,S.jsx)(n.Text,{color:"red",children:"*"})]}),(0,S.jsxs)(o.InputGroup,{children:[(0,S.jsx)(o.InputLeftElement,{pointerEvents:"none",children:(0,S.jsx)(m.PhoneIcon,{color:"gray.300",borderRadius:"16px"})}),(0,S.jsx)(o.Input,{type:"tel",fontSize:"sm",onChange:O,onBlur:G,value:L.phoneNumber,name:"phoneNumber",fontWeight:"500",borderColor:k.phoneNumber&&T.phoneNumber?"red.300":null,placeholder:"Phone number",borderRadius:"16px"})]}),(0,S.jsx)(n.Text,{mb:"10px",color:"red",children:k.phoneNumber&&T.phoneNumber&&k.phoneNumber})]}),(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Password Expiration",(0,S.jsx)(n.Text,{color:"red",children:"*"})]}),(0,S.jsxs)(d.l6,{name:"passwordExpirationPeriod",value:L.passwordExpirationPeriod,onChange:O,onBlur:G,fontSize:"sm",fontWeight:"500",children:[(0,S.jsx)("option",{value:"3days",children:"3 Days"}),(0,S.jsx)("option",{value:"1month",children:"1 Month"}),(0,S.jsx)("option",{value:"6months",children:"6 Months"}),(0,S.jsx)("option",{value:"1year",children:"1 Year"}),(0,S.jsx)("option",{value:"forever",children:"Forever"})]})]}),"edit"!==g&&(0,S.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,S.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Password"}),(0,S.jsxs)(o.InputGroup,{size:"md",children:[(0,S.jsx)(o.Input,{isRequired:!0,fontSize:"sm",placeholder:"Enter Your Password",name:"password",size:"lg",variant:"auth",type:W?"text":"password",value:L.password,onChange:O,onBlur:G,borderColor:k.password&&T.password?"red.300":null,className:k.password&&T.password?"isInvalid":null}),(0,S.jsx)(o.InputRightElement,{display:"flex",alignItems:"center",mt:"4px",children:(0,S.jsx)(c.In,{color:"gray.400",_hover:{cursor:"pointer"},as:W?h.B6J:u.kIi,onClick:()=>A(!W)})})]}),(0,S.jsx)(n.Text,{mb:"10px",color:"red",children:k.password&&T.password&&k.password})]})]})}),(0,S.jsxs)(t.jl,{children:[(0,S.jsx)(l.Button,{variant:"brand",size:"sm",disabled:z,onClick:P,children:z?(0,S.jsx)(f.A,{}):"Save"}),(0,S.jsx)(l.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{F.resetForm(),s()},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=2673.2f181058.chunk.js.map