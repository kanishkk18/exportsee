"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[7083],{37083:(e,l,t)=>{t.r(l),t.d(l,{default:()=>A});var o=t(19754),i=t(4450),n=t(22554),s=t(65043),a=t(79621),r=t(88031),d=t(34960),c=t(73216),u=t(31206),x=t(57360),v=t(71778),h=t(19488),p=t(71094),m=t(35066),g=t(63516),j=t(52853),f=t(70579);const S=function(e){const{columnsData:l,name:t,tableData:o,fetchData:r,setAccess:d,_id:c,setRoleModal:S,editModal:y,setEditModal:C}=e,T=(0,u.dU)("secondaryGray.900","white"),b=(0,u.dU)("gray.200","whiteAlpha.100"),w=(0,s.useMemo)((()=>l),[l]),[z,P]=(0,s.useState)(!1),[H,k]=(0,s.useState)(),D=(0,s.useMemo)((()=>o||[]),[o]),W=(0,p.useTable)({columns:w,data:D,initialState:{pageIndex:0}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableBodyProps:N,headerGroups:A,prepareRow:O,page:F,pageOptions:I,setPageSize:B,state:{pageIndex:M,pageSize:R}}=W;I.length<H&&k(I.length);const G={roleName:t,access:o},E=(0,g.Wx)({initialValues:G,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:t}=l;X()}}),{values:_,handleSubmit:U,setFieldValue:V,resetForm:L}=E,$=(e,l,t)=>o=>{const{checked:i}=o.target,n=_.access.findIndex((e=>"Leads"===e.title)),s=_.access.findIndex((e=>"Contacts"===e.title)),a=_.access.map(((o,n)=>{if(n===e){const e={...o,[l]:i};return t&&!i?e[t]=e.update=e.delete=i:t&&(e[t]=i),e}return o})),r=a.map(((e,l)=>{var o,r;return!t||!1!==i||null!==(o=a[s])&&void 0!==o&&o.view||null!==(r=a[n])&&void 0!==r&&r.view||!["Emails","Calls","Meetings"].includes(e.title)?e:{...e,create:!1,delete:!1,update:!1,view:!1}}));V("access",r)},X=async()=>{try{P(!0),d(null===_||void 0===_?void 0:_.access),200===(await(0,a.yP)(`api/role-access/edit/${c}`,_)).status&&(C(!1),r(),S(!0))}catch(e){console.log(e)}finally{P(!1)}},Q=e=>{var l;return!!["Emails","Calls","Meetings"].includes(e.title)&&!(null!==_&&void 0!==_&&null!==(l=_.access)&&void 0!==l&&l.some((e=>("Contacts"===e.title||"Leads"===e.title)&&e.view)))};return(0,s.useEffect)((()=>{r()}),[y]),(0,s.useEffect)((()=>{Array.isArray(D)&&(null===D||void 0===D?void 0:D.length)>0&&B(null===D||void 0===D?void 0:D.length)}),[D,B]),(0,f.jsxs)(x.aF,{onClose:()=>C(!1),isOpen:y,isCentered:!0,size:"xl",children:[(0,f.jsx)(x.mH,{}),(0,f.jsxs)(x.$m,{height:"580px",maxWidth:"2xl",children:[(0,f.jsxs)(x.rQ,{textTransform:"capitalize",children:[t," Access"]}),(0,f.jsx)(x.s_,{}),(0,f.jsx)(x.cw,{overflow:"auto",height:"400px",children:(0,f.jsxs)(v.XI,{children:[(0,f.jsx)(v.d8,{children:null===A||void 0===A?void 0:A.map(((e,l)=>{var t;return(0,s.createElement)(v.Tr,{...e.getHeaderGroupProps(),key:l},null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,f.jsx)(v.Th,{sx:{width:"10px"},pe:"10px",borderColor:b,display:!1===e.display&&"none",children:(0,f.jsx)(i.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:!1!==e.display&&e.render("Header")})},l))))}))}),(0,f.jsx)(v.NN,{...N(),children:z?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,f.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(h.A,{})})})}):0===(null===D||void 0===D?void 0:D.length)?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:w.length,children:(0,f.jsx)(i.Text,{textAlign:"center",width:"100%",color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===F||void 0===F?void 0:F.map(((e,l)=>{var t;return O(e),(0,s.createElement)(v.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,t)=>{let o="";if("title"===(null===e||void 0===e?void 0:e.column.Header))o=(0,f.jsx)(i.Text,{me:"10px",color:T,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("create"===(null===e||void 0===e?void 0:e.column.Header)){var n,a,r;o=(0,f.jsx)(i.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:Q(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original),isChecked:null===_||void 0===_||null===(a=_.access[l])||void 0===a?void 0:a.create,defaultChecked:null===_||void 0===_||null===(r=_.access[l])||void 0===r?void 0:r.create,onChange:$(l,"create","view")})})}else if("view"===(null===e||void 0===e?void 0:e.column.Header)){var d,c,u;o=(0,f.jsx)(i.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:Q(null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.original),isChecked:null===_||void 0===_||null===(c=_.access[l])||void 0===c?void 0:c.view,defaultChecked:null===_||void 0===_||null===(u=_.access[l])||void 0===u?void 0:u.view,onChange:$(l,"view","create")})})}else if("update"===(null===e||void 0===e?void 0:e.column.Header)){var x,h,p;o=(0,f.jsx)(i.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:!(null!==_&&void 0!==_&&null!==(x=_.access[l])&&void 0!==x&&x.view),isChecked:null===_||void 0===_||null===(h=_.access[l])||void 0===h?void 0:h.update,defaultChecked:null===_||void 0===_||null===(p=_.access[l])||void 0===p?void 0:p.update,onChange:$(l,"update")})})}else if("delete"===(null===e||void 0===e?void 0:e.column.Header)){var g,j,S;o=(0,f.jsx)(i.Text,{color:T,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(m.Sc,{disabled:!(null!==_&&void 0!==_&&null!==(g=_.access[l])&&void 0!==g&&g.view),isChecked:null===_||void 0===_||null===(j=_.access[l])||void 0===j?void 0:j.delete,defaultChecked:null===_||void 0===_||null===(S=_.access[l])||void 0===S?void 0:S.delete,onChange:$(l,"delete")})})}return(0,s.createElement)(v.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:t,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e?void 0:e.column.Header)&&"none"}},o)})))}))})]})}),(0,f.jsxs)(x.jl,{children:[(0,f.jsx)(n.Button,{size:"sm",variant:"brand",onClick:U,children:"Save"}),(0,f.jsx)(n.Button,{size:"sm",onClick:()=>{L(),C(!1),S(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};var y=t(85369),C=t(78152),T=t(4448);const b=e=>{const{setUserModal:l,userModal:t,tableData:o,columnsData:r,setOpenUser:d,_id:c,userRole:h,fetchData:g}=e,S=(0,u.dU)("secondaryGray.900","white"),b=(0,u.dU)("gray.200","whiteAlpha.100"),w=(0,s.useMemo)((()=>r),[r]),[z,P]=(0,s.useState)(!1),[H,k]=(0,s.useState)([]),D=(0,s.useMemo)((()=>o),[o]),[W,N]=(0,s.useState)(),A=(0,p.useTable)({columns:w,data:D,initialState:{pageIndex:0}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableProps:O,getTableBodyProps:F,headerGroups:I,prepareRow:B,page:M,canPreviousPage:R,canNextPage:G,pageOptions:E,pageCount:_,gotoPage:U,nextPage:V,previousPage:L,setPageSize:$,state:{pageIndex:X,pageSize:Q}}=A;E.length<W&&N(E.length);const q=[...new Set(H)];(0,s.useEffect)((()=>{const e=null===h||void 0===h?void 0:h.map((e=>e._id));k(e)}),[t]);return(0,f.jsxs)(x.aF,{onClose:()=>l(!1),isOpen:t,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,f.jsx)(x.mH,{}),(0,f.jsxs)(x.$m,{children:[(0,f.jsx)(x.rQ,{children:(0,f.jsxs)(i.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(i.Text,{children:"Users"}),(0,f.jsx)(x.s_,{mt:"2"})]})}),(0,f.jsxs)(x.cw,{overflowY:"auto",height:"400px",children:[(0,f.jsxs)(v.XI,{...O(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,f.jsx)(v.d8,{children:null===I||void 0===I?void 0:I.map(((e,l)=>{var t;return(0,s.createElement)(v.Tr,{...e.getHeaderGroupProps(),key:l},null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,s.createElement)(v.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:l,borderColor:b},(0,f.jsxs)(i.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,f.jsx)("span",{style:{textTransform:"capitalize"},children:e.render("Header")}),!1!==e.isSortable&&(0,f.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,f.jsx)(y.GOR,{}):(0,f.jsx)(y.XhJ,{}):(0,f.jsx)(y.MjW,{})})]})))))}))}),(0,f.jsx)(v.NN,{...F(),children:z?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:null===w||void 0===w?void 0:w.length,children:(0,f.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(T.y,{})})})}):0===(null===D||void 0===D?void 0:D.length)?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:w.length,children:(0,f.jsx)(i.Text,{textAlign:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===M||void 0===M?void 0:M.map(((e,l)=>{var t;return B(e),(0,s.createElement)(v.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,f.jsxs)(i.Flex,{align:"center",children:[(0,f.jsx)(m.Sc,{colorScheme:"brandScheme",value:H,isChecked:H.includes(null===e||void 0===e?void 0:e.value),onChange:l=>((e,l)=>{e.target.checked?k((e=>[...e,l])):k((e=>e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,f.jsx)(i.Text,{color:S,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]}):"email Id"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,f.jsx)(i.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,f.jsx)(i.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e?void 0:e.column.Header)&&(t=(0,f.jsx)(i.Text,{color:S,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(v.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},t)})))}))})]}),(null===D||void 0===D?void 0:D.length)>5&&(0,f.jsx)(C.A,{gotoPage:U,gopageValue:W,setGopageValue:N,pageCount:_,canPreviousPage:R,previousPage:L,canNextPage:G,pageOptions:E,setPageSize:$,nextPage:V,pageSize:Q,pageIndex:X})]}),(0,f.jsxs)(x.jl,{children:[(0,f.jsx)(n.Button,{variant:"brand",size:"sm",onClick:()=>{(async()=>{200===(await(0,a.yP)(`api/role-access/assignedUsers/${c}`,q)).status&&(l(!1),g())})(),d(!0)},children:"Save"}),(0,f.jsx)(n.Button,{size:"sm",onClick:()=>{l(!1),k([]),d(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]})};const w=function(e){const{tableData:l,columnsData:t,isOpen:o,_id:r,setRoleModal:d,setOpenUser:c,fetchData:m}=e,g=(0,u.dU)("secondaryGray.900","white"),S=(0,u.dU)("gray.200","whiteAlpha.100"),T=(0,s.useMemo)((()=>t),[t]),[w,z]=(0,s.useState)([]),[P,H]=(0,s.useState)(!1),k=(0,s.useMemo)((()=>l),[l]),[D,W]=(0,s.useState)(!1),[N,A]=(0,s.useState)([]),[O,F]=(0,s.useState)(),I=(0,p.useTable)({columns:T,data:k,initialState:{pageIndex:0}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableProps:B,getTableBodyProps:M,headerGroups:R,prepareRow:G,page:E,canPreviousPage:_,canNextPage:U,pageOptions:V,pageCount:L,gotoPage:$,nextPage:X,previousPage:Q,setPageSize:q,state:{pageIndex:Y,pageSize:J}}=I;V.length<O&&F(V.length);const Z=async()=>{var e;let l=await(0,a.x4)("api/user/?role=user");A(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.user)};return(0,s.useEffect)((()=>{Z()}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(x.aF,{onClose:()=>c(!1),isOpen:o,isCentered:!0,size:"4xl",style:{height:"560px"},children:[(0,f.jsx)(x.mH,{}),(0,f.jsxs)(x.$m,{children:[(0,f.jsx)(x.rQ,{height:"580px",children:(0,f.jsxs)(i.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(i.Text,{children:"Users"}),(0,f.jsx)(n.Button,{variant:"brand",size:"sm",me:"2rem",onClick:()=>{c(!1),W(!0)},children:"Manage Users"}),(0,f.jsx)(x.s_,{mt:"2"})]})}),(0,f.jsxs)(x.cw,{overflow:"auto",height:"400px",children:[(0,f.jsxs)(v.XI,{...B(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,f.jsx)(v.d8,{children:null===R||void 0===R?void 0:R.map(((e,l)=>{var t;return(0,s.createElement)(v.Tr,{...e.getHeaderGroupProps(),key:l},null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,s.createElement)(v.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:l,borderColor:S},(0,f.jsxs)(i.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,f.jsx)("span",{style:{textTransform:"capitalize"},children:e.render("Header")}),!1!==e.isSortable&&(0,f.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,f.jsx)(y.GOR,{}):(0,f.jsx)(y.XhJ,{}):(0,f.jsx)(y.MjW,{})})]})))))}))}),(0,f.jsx)(v.NN,{...M(),children:P?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:null===T||void 0===T?void 0:T.length,children:(0,f.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:g,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(h.A,{})})})}):0===(null===k||void 0===k?void 0:k.length)?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:T.length,children:(0,f.jsx)(i.Text,{textAlign:"center",width:"100%",color:g,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===E||void 0===E?void 0:E.map(((e,l)=>{var t;return G(e),(0,s.createElement)(v.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{let t="";var o;"#"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,f.jsx)(i.Flex,{align:"center",children:(0,f.jsx)(i.Text,{color:g,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})}):"email Id"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,f.jsx)(i.Text,{me:"10px",color:g,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,f.jsx)(i.Text,{me:"10px",color:g,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"role"===(null===e||void 0===e?void 0:e.column.Header)&&(t=(0,f.jsx)(i.Text,{color:g,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(v.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},t)})))}))})]}),(null===k||void 0===k?void 0:k.length)>5&&(0,f.jsx)(C.A,{gotoPage:$,gopageValue:O,setGopageValue:F,pageCount:L,canPreviousPage:_,previousPage:Q,canNextPage:U,pageOptions:V,setPageSize:q,nextPage:X,pageSize:J,pageIndex:Y})]}),(0,f.jsx)(x.jl,{children:(0,f.jsx)(n.Button,{size:"sm",onClick:()=>{c(!1),d(!0)},variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})})]})]}),(0,f.jsx)(b,{fetchData:m,userModal:D,setOpenUser:c,_id:r,setUserModal:W,userFetchData:Z,userRole:l,tableData:N||[],columnsData:t||[]})]})};const z=function(e){const{name:l,tableData:t,fetchData:o,columnsData:r,isOpen:d,setAction:c,setAccess:m,_id:g,onOpen:y,setRoleModal:C}=e,T=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"role",accessor:"role"}],b=(0,u.dU)("secondaryGray.900","white"),z=(0,u.dU)("gray.200","whiteAlpha.100"),P=(0,s.useMemo)((()=>r),[r]),[H,k]=(0,s.useState)(!1),[D,W]=(0,s.useState)(!1),[N,A]=(0,s.useState)(),[O,F]=(0,s.useState)(),I=(0,s.useMemo)((()=>t||[]),[t]),[B,M]=(JSON.parse(localStorage.getItem("user")),(0,s.useState)([])),R=(0,p.useTable)({columns:P,data:I,initialState:{pageIndex:0,pageSize:500}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableBodyProps:G,headerGroups:E,prepareRow:_,page:U,pageOptions:V,state:{pageIndex:L,pageSize:$}}=R;V.length<O&&F(V.length);const X=async()=>{if(g){let e=await(0,a.x4)("api/role-access/assignedUsers/",g);M(null===e||void 0===e?void 0:e.data)}};return(0,s.useEffect)((()=>{X()}),[g]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(x.aF,{onClose:()=>C(!1),isOpen:d,isCentered:!0,size:"xl",children:[(0,f.jsx)(x.mH,{}),(0,f.jsxs)(x.$m,{height:"580px",maxWidth:"2xl",children:[(0,f.jsx)(x.rQ,{children:(0,f.jsxs)(i.Flex,{justifyContent:"space-between",children:[(0,f.jsxs)(i.Text,{textTransform:"capitalize",children:[l," Access"]}),(0,f.jsxs)(i.Text,{style:{marginRight:"25px",fontSize:"15px",fontWeight:"700",marginTop:"5px",color:"blue",cursor:"pointer",textDecoration:"underline"},onClick:()=>{A(!0),C(!1)},children:["View user's in ",l," role"]}),(0,f.jsx)(x.s_,{mt:"2"})]})}),(0,f.jsx)(x.cw,{overflow:"auto",height:"400px",children:(0,f.jsxs)(v.XI,{children:[(0,f.jsx)(v.d8,{children:null===E||void 0===E?void 0:E.map(((e,l)=>{var t;return(0,s.createElement)(v.Tr,{...e.getHeaderGroupProps(),key:l},null===(t=e.headers)||void 0===t?void 0:t.map(((e,l)=>(0,f.jsx)(v.Th,{sx:{width:"10px"},borderColor:z,display:!1===e.display&&"none",children:!1!==e.display&&e.render("Header")},l))))}))}),(0,f.jsx)(v.NN,{...G(),children:H?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:null===P||void 0===P?void 0:P.length,children:(0,f.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(h.A,{})})})}):0===(null===I||void 0===I?void 0:I.length)?(0,f.jsx)(v.Tr,{children:(0,f.jsx)(v.Td,{colSpan:P.length,children:(0,f.jsx)(i.Text,{textAlign:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(j.A,{})})})}):null===U||void 0===U?void 0:U.map(((e,l)=>{var t;return _(e),(0,s.createElement)(v.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,l)=>{let t="";return"title"===(null===e||void 0===e?void 0:e.column.Header)?t=(0,f.jsx)(i.Text,{me:"10px",color:b,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("create"===(null===e||void 0===e?void 0:e.column.Header)||"view"===(null===e||void 0===e?void 0:e.column.Header)||"update"===(null===e||void 0===e?void 0:e.column.Header)||"delete"===(null===e||void 0===e?void 0:e.column.Header))&&(t=(0,f.jsx)(i.Text,{color:b,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?"Yes":"No"})),(0,s.createElement)(v.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent",sx:{display:"#"===(null===e||void 0===e?void 0:e.column.Header)&&"none"}},t)})))}))})]})}),(0,f.jsxs)(x.jl,{children:[(0,f.jsx)(n.Button,{variant:"brand",size:"sm",onClick:()=>{W(!0),C(!1)},children:"Change Access"}),(0,f.jsx)(n.Button,{size:"sm",onClick:()=>C(!1),variant:"outline",colorScheme:"red",sx:{marginLeft:2,textTransform:"capitalize"},children:"Close"})]})]})]}),(0,f.jsx)(S,{tableData:null!==t&&void 0!==t?t:[],accessRole:null!==t&&void 0!==t?t:[],setAccess:m,setRoleModal:C,columnsData:null!==r&&void 0!==r?r:[],_id:g,fetchData:o,name:l,setEditModal:W,setAction:c,editModal:D}),(0,f.jsx)(w,{isOpen:N,setRoleModal:C,setOpenUser:A,onOpen:y,columnsData:null!==T&&void 0!==T?T:[],tableData:null!==B&&void 0!==B?B:[],setAction:c,_id:g,fetchData:X,userdata:B})]})};var P=t(14034),H=t(78510),k=t(67682),D=t(47503),W=t(80899);const N=e=>{const{onClose:l,isOpen:t,setAction:o}=e,[r,d]=(0,s.useState)(!1),c=W.Ik({roleName:W.Yj().required("Role Name is required"),description:W.Yj().required("Description is required")}),u=(0,g.Wx)({initialValues:{roleName:"",description:""},validationSchema:c,onSubmit:(e,l)=>{let{resetForm:t}=l;b(),t()}}),{errors:v,touched:p,values:m,handleBlur:j,handleChange:S,handleSubmit:y,setFieldValue:C,resetForm:T}=u,b=async()=>{try{d(!0);let t=await(0,a.d_)("api/role-access/add",m);var e;if(t&&200===t.status)l(!1),o((e=>!e));else D.oR.error(null===(e=t.response.data)||void 0===e?void 0:e.message)}catch(t){console.log(t)}finally{d(!1)}};return(0,f.jsxs)(x.aF,{isOpen:t,isCentered:!0,children:[(0,f.jsx)(x.mH,{}),(0,f.jsxs)(x.$m,{children:[(0,f.jsxs)(x.rQ,{justifyContent:"space-between",display:"flex",children:["Add Role",(0,f.jsx)(n.IconButton,{onClick:()=>l(!1),icon:(0,f.jsx)(P.CloseIcon,{})})]}),(0,f.jsx)(x.cw,{children:(0,f.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,f.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Role Name",(0,f.jsx)(i.Text,{color:"red",children:"*"})]}),(0,f.jsx)(k.Input,{fontSize:"sm",onChange:S,onBlur:j,value:m.roleName,name:"roleName",placeholder:"Enter Role Name",fontWeight:"500",borderColor:v.roleName&&p.roleName?"red.300":null}),(0,f.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",v.roleName&&p.roleName&&v.roleName]})]}),(0,f.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(H.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Description",(0,f.jsx)(i.Text,{color:"red",children:"*"})]}),(0,f.jsx)(k.Input,{fontSize:"sm",onChange:S,onBlur:j,value:m.description,name:"description",placeholder:"Enter Description",fontWeight:"500",borderColor:v.description&&p.description?"red.300":null}),(0,f.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",v.description&&p.description&&v.description]})]})]})}),(0,f.jsxs)(x.jl,{children:[(0,f.jsx)(n.Button,{size:"sm",variant:"brand",mr:1,disabled:!!r,onClick:y,children:r?(0,f.jsx)(h.A,{}):"Save"}),(0,f.jsx)(n.Button,{size:"sm",variant:"outline",color:"red",colorScheme:"red",onClick:()=>{u.resetForm(),l(!1)},children:"Close"})]})]})]})},A=()=>{const{isOpen:e,onOpen:l,onClose:t}=(0,o.j1)(),[u,x]=(0,s.useState)(!1),[v,h]=(0,s.useState)([]),[p,m]=(0,s.useState)(""),[g,j]=(0,s.useState)(""),[S,y]=(0,s.useState)([]),[C,T]=(0,s.useState)(!1),[b,w]=(0,s.useState)(""),[P,H]=(0,s.useState)([]),k=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"Role Name",accessor:"roleName",cell:e=>(0,f.jsx)(i.Text,{me:"10px",onClick:()=>{var l,t,o,i;x(!0),w(null===e||void 0===e?void 0:e.value),m(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(t=l.original)||void 0===t?void 0:t._id),h(null===e||void 0===e||null===(o=e.row)||void 0===o||null===(i=o.original)||void 0===i?void 0:i.access)},color:"brand.600",sx:{"&:hover":{color:"blue.500",textDecoration:"underline",cursor:"pointer"}},fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})},{Header:"Description",accessor:"description"}],D=[{Header:"#",accessor:"_id",isSortable:!1,width:10,display:!1},{Header:"title",accessor:"title"},{Header:"create",accessor:"create",width:"20px"},{Header:"view",accessor:"view",width:"20px"},{Header:"update",accessor:"update",width:"20px"},{Header:"delete",accessor:"delete",width:"20px"}],[W,A]=(0,s.useState)(!1),[O,F]=(0,s.useState)(!1),[I,B]=(0,s.useState)([]),M=(0,c.Zp)(),R=async()=>{F(!0);let e=await(0,a.x4)("api/role-access");B(e.data),F(!1)};return(0,s.useEffect)((()=>{R()}),[W]),(0,f.jsxs)("div",{children:[(0,f.jsx)(r.A,{title:"Roles",isLoding:O,columnData:null!==k&&void 0!==k?k:[],allData:I||[],tableData:I,AdvanceSearch:!1,tableCustomFields:[],searchedDataOut:P,searchDisplay:C,setSearchDisplay:T,setSearchedDataOut:H,searchboxOutside:g,BackButton:(0,f.jsx)(n.Button,{onClick:()=>M("/admin-setting"),variant:"brand",size:"sm",leftIcon:(0,f.jsx)(d.m6W,{}),ml:2,children:"Back"}),deleteMany:!0,access:!0,checkBox:!1,getTagValuesOutSide:S,setGetTagValuesOutside:y,ManageGrid:!1,onOpen:l,customSearch:!0}),(0,f.jsx)(N,{isOpen:e,size:"sm",setAction:A,onClose:t}),v&&(0,f.jsx)(z,{isOpen:u,setRoleModal:x,onOpen:l,isLoding:O,columnsData:null!==D&&void 0!==D?D:[],name:b,_id:p,tableData:null!==v&&void 0!==v?v:[],setAccess:h,fetchData:R,setAction:A})]})}}}]);
//# sourceMappingURL=7083.b3faa81e.chunk.js.map