"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[7936],{47936:(e,t,a)=>{a.d(t,{A:()=>V});var l=a(57360),n=a(4450),o=a(78510),s=a(67682),d=a(95104),r=a(22554),i=a(53186),c=a(88587),u=a(65043),x=a(41046),m=a(19488),h=a(8860),p=a(70579);const g=e=>{const{onClose:t,isOpen:a,fieldName:o,setFieldValue:s,data:d}=e,[i,c]=(0,u.useState)([]),[g,v]=(0,u.useState)(!1),j=(JSON.parse(localStorage.getItem("user")),[...new Set(i)]);return(0,p.jsxs)(l.aF,{onClose:t,size:"full",isOpen:a,children:[(0,p.jsx)(l.mH,{}),(0,p.jsxs)(l.$m,{children:[(0,p.jsx)(l.rQ,{children:"Select Contact"}),(0,p.jsx)(l.s_,{}),(0,p.jsx)(l.cw,{children:g?(0,p.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,p.jsx)(m.A,{})}):(0,p.jsx)(x.A,{tableData:d,type:"multi",selectedValues:i,setSelectedValues:c,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,p.jsxs)(l.jl,{children:[(0,p.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{v(!0),s(o,j),t()}catch(e){console.log(e)}finally{v(!1)}},disabled:!!g,leftIcon:(0,p.jsx)(h.NLY,{}),children:[" ",g?(0,p.jsx)(m.A,{}):"Select"]}),(0,p.jsx)(r.Button,{onClick:()=>t(),children:"Close"})]})]})]})};var v=a(31206),j=a(71778),S=a(35066),f=a(71094),C=a(10216),b=a(76914),y=a(78152),L=a(85369);function T(e){const{columnsData:t,tableData:a,title:l,type:o,selectedValues:s,setSelectedValues:d}=e,r=(0,u.useMemo)((()=>t),[t]),i=(0,u.useMemo)((()=>a),[a]),[c,x]=(JSON.parse(localStorage.getItem("user")),(0,u.useState)()),m=(0,f.useTable)({columns:r,data:i,initialState:{pageIndex:0}},f.useGlobalFilter,f.useSortBy,f.usePagination),{getTableProps:h,getTableBodyProps:g,headerGroups:T,prepareRow:w,page:N,canPreviousPage:z,canNextPage:H,pageOptions:I,pageCount:A,gotoPage:P,nextPage:F,previousPage:k,setPageSize:V,state:{pageIndex:B,pageSize:O}}=m;I.length<c&&x(I.length);const W=(0,v.dU)("gray.500","white"),D=(0,v.dU)("gray.200","whiteAlpha.100"),_=(e,t)=>{"multi"===o?e.target.checked?d((e=>[...e,t])):d((e=>e.filter((e=>e!==t)))):e.target.checked?d(t):d(null)};return(0,p.jsxs)(C.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,p.jsx)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,p.jsxs)(n.Text,{color:W,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[l,"  (",(0,p.jsx)(b.A,{targetNumber:null===i||void 0===i?void 0:i.length},null===i||void 0===i?void 0:i.length),")"]})}),(0,p.jsx)(n.Box,{overflowY:"auto",className:"table-container-property",children:(0,p.jsxs)(j.XI,{...h(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,p.jsx)(j.d8,{zIndex:1,children:null===T||void 0===T?void 0:T.map(((e,t)=>(0,u.createElement)(j.Tr,{...e.getHeaderGroupProps(),key:t},e.headers.map(((e,t)=>(0,u.createElement)(j.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:t,borderColor:D},(0,p.jsxs)(n.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,p.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:e.render("Header")}),!1!==e.isSortable&&(0,p.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,p.jsx)(L.GOR,{}):(0,p.jsx)(L.XhJ,{}):(0,p.jsx)(L.MjW,{})})]})))))))}),(0,p.jsxs)(j.NN,{...g(),children:[0===(null===i||void 0===i?void 0:i.length)&&(0,p.jsx)(j.Tr,{children:(0,p.jsx)(j.Td,{colSpan:r.length,children:(0,p.jsx)(n.Text,{textAlign:"center",width:"100%",color:W,fontSize:"sm",fontWeight:"700",children:"hello"})})}),null===N||void 0===N?void 0:N.map(((e,t)=>{var a;return w(e),(0,u.createElement)(j.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:t},null===e||void 0===e||null===(a=e.cells)||void 0===a?void 0:a.map(((e,t)=>{let a="";var l;"#"===(null===e||void 0===e?void 0:e.column.Header)?a=(0,p.jsxs)(n.Flex,{align:"center",children:["multi"===o?(0,p.jsx)(S.Sc,{colorScheme:"brandScheme",value:s,isChecked:s.includes(null===e||void 0===e?void 0:e.value),onChange:t=>_(t,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,p.jsx)(S.Sc,{colorScheme:"brandScheme",value:s,isChecked:s===(null===e||void 0===e?void 0:e.value),onChange:t=>_(t,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,p.jsx)(n.Text,{color:W,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.index)+1})]}):"Lead Name"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Email"===(null===e||void 0===e?void 0:e.column.Header)||"Lead PhoneNumber"===(null===e||void 0===e?void 0:e.column.Header)?a=(0,p.jsx)(n.Text,{me:"10px",color:W,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):("Lead Address"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Status"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Owner"===(null===e||void 0===e?void 0:e.column.Header)||"Lead Score"===(null===e||void 0===e?void 0:e.column.Header))&&(a=(0,p.jsx)(n.Text,{color:W,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,u.createElement)(j.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:t,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},a)})))}))]})]})}),(null===i||void 0===i?void 0:i.length)>5&&(0,p.jsx)(y.A,{gotoPage:P,gopageValue:c,setGopageValue:x,pageCount:A,canPreviousPage:z,previousPage:k,canNextPage:H,pageOptions:I,setPageSize:V,nextPage:F,pageSize:O,pageIndex:B})]})}const w=e=>{const{onClose:t,isOpen:a,fieldName:o,setFieldValue:s,data:d}=e,[i,c]=(0,u.useState)([]),[x,g]=(0,u.useState)(!1),v=(JSON.parse(localStorage.getItem("user")),[...new Set(i)]);return(0,p.jsxs)(l.aF,{onClose:t,size:"full",isOpen:a,children:[(0,p.jsx)(l.mH,{}),(0,p.jsxs)(l.$m,{children:[(0,p.jsx)(l.rQ,{children:"Select Lead"}),(0,p.jsx)(l.s_,{}),(0,p.jsx)(l.cw,{children:x?(0,p.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,p.jsx)(m.A,{})}):(0,p.jsx)(T,{tableData:d,type:"multi",selectedValues:i,setSelectedValues:c,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,p.jsxs)(l.jl,{children:[(0,p.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{g(!0),s(o,v),t()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!x,leftIcon:(0,p.jsx)(h.NLY,{}),children:[" ",x?(0,p.jsx)(m.A,{}):"Select"]}),(0,p.jsx)(r.Button,{onClick:()=>t(),children:"Close"})]})]})]})};var N=a(60446),z=a.n(N),H=a(63516),I=a(3388),A=a(97508),P=a(47503),F=a(89849),k=a(79621);const V=e=>{var t,a,x;const{onClose:h,isOpen:v,setAction:j,from:S,fetchData:f,view:C}=e,[b,y]=(0,u.useState)([]),[L,T]=(0,u.useState)([]),[N,V]=(0,u.useState)(!1),[B,O]=(0,u.useState)(!1),[W,D]=(0,u.useState)(!1),_=(new Date).toISOString().split(".")[0],G=(0,A.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.leadData)||void 0===t?void 0:t.data})),E=JSON.parse(localStorage.getItem("user")),M=(0,A.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.contactData)||void 0===t?void 0:t.data})),Y={agenda:"",attendes:"contactView"===e.leadContect&&e.id?[e.id]:[],attendesLead:"leadView"===e.leadContect&&e.id?[e.id]:[],location:"",related:"contactView"===e.leadContect?"Contact":"leadView"===e.leadContect?"Lead":"None",dateTime:"",notes:"",createBy:null===E||void 0===E?void 0:E._id},$=(0,H.Wx)({initialValues:Y,validationSchema:F.pq,onSubmit:(e,t)=>{let{resetForm:a}=t;Z()}}),{errors:R,touched:J,values:Q,handleBlur:U,handleChange:X,handleSubmit:q,setFieldValue:K}=$,Z=async()=>{try{if(V(!0),Q.attendes.length>0||Q.attendesLead.length>0){200===(await(0,k.d_)("api/meeting/add",Q)).status&&($.resetForm(),e.onClose(),f(1))}else P.oR.error("Select Related To")}catch(t){console.log(t)}finally{V(!1)}};(0,u.useEffect)((()=>{(async()=>{if(!0===C)"Contact"===Q.related&&L.length<=0?T(M):"Lead"===Q.related&&b.length<=0&&y(G);else{let a;var e;if("Contact"===Q.related&&L.length<=0)a=await(0,k.x4)("superAdmin"===E.role?"api/contact/":`api/contact/?createBy=${E._id}`),T(null===(e=a)||void 0===e?void 0:e.data);else if("Lead"===Q.related&&b.length<=0){var t;a=await(0,k.x4)("superAdmin"===E.role?"api/lead/":`api/lead/?createBy=${E._id}`),y(null===(t=a)||void 0===t?void 0:t.data)}}})()}),[e.id,Q.related]);const ee=null===(t="Contact"===Q.related?L:b)||void 0===t?void 0:t.map((e=>({...e,value:e._id,label:"Contact"===Q.related?`${e.firstName} ${e.lastName}`:e.leadName})));return(0,p.jsxs)(l.aF,{onClose:h,isOpen:v,isCentered:!0,children:[(0,p.jsx)(l.mH,{}),(0,p.jsxs)(l.$m,{height:"580px",children:[(0,p.jsx)(l.rQ,{children:"Add Meeting "}),(0,p.jsx)(l.s_,{}),(0,p.jsxs)(l.cw,{overflowY:"auto",height:"400px",children:[(0,p.jsx)(g,{data:L,isOpen:B,onClose:O,fieldName:"attendes",setFieldValue:K}),(0,p.jsx)(w,{data:b,isOpen:W,onClose:D,fieldName:"attendesLead",setFieldValue:K}),(0,p.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Agenda",(0,p.jsx)(n.Text,{color:"red",children:"*"})]}),(0,p.jsx)(s.Input,{fontSize:"sm",onChange:X,onBlur:U,value:Q.agenda,name:"agenda",placeholder:"Agenda",fontWeight:"500",borderColor:R.agenda&&J.agenda?"red.300":null}),(0,p.jsxs)(n.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",R.agenda&&J.agenda&&R.agenda]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Related To",(0,p.jsx)(n.Text,{color:"red",children:"*"})]}),(0,p.jsx)(d.z6,{onChange:e=>K("related",e),value:Q.related,children:(0,p.jsxs)(n.Stack,{direction:"row",children:["contactView"===e.leadContect&&(0,p.jsx)(d.sx,{value:"Contact",children:"Contact"}),"leadView"===e.leadContect&&(0,p.jsx)(d.sx,{value:"Lead",children:"Lead"}),!e.leadContect&&(0,p.jsxs)(p.Fragment,{children:[" ",(0,p.jsx)(d.sx,{value:"Contact",children:"Contact"}),(0,p.jsx)(d.sx,{value:"Lead",children:"Lead"})]})]})}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",fontSize:"sm",children:[" ",R.related&&J.related&&R.related]})]}),("Contact"===Q.related?(null!==(a=null===L||void 0===L?void 0:L.length)&&void 0!==a?a:0)>0:(null!==(x=null===b||void 0===b?void 0:b.length)&&void 0!==x?x:0)>0)&&Q.related&&(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsxs)(n.Flex,{alignItems:"end",justifyContent:"space-between",children:[(0,p.jsx)(n.Text,{w:"100%",children:(0,p.jsx)(c.CUIAutoComplete,{label:`Choose Preferred Attendes ${"Contact"===Q.related?"Contact":"Lead"===Q.related&&"Lead"}`,placeholder:"Type a Name",name:"attendes",items:ee,className:"custom-autoComplete",selectedItems:null===ee||void 0===ee?void 0:ee.filter((e=>"Contact"===Q.related?null===Q||void 0===Q?void 0:Q.attendes.includes(e._id):"Lead"===Q.related&&(null===Q||void 0===Q?void 0:Q.attendesLead.includes(e._id)))),onSelectedItemsChange:e=>{const t=e.selectedItems.map((e=>e._id));"Contact"===Q.related?K("attendes",t):"Lead"===Q.related&&K("attendesLead",t)}})}),(0,p.jsx)(r.IconButton,{mb:6,onClick:()=>"Contact"===Q.related?O(!0):"Lead"===Q.related&&D(!0),fontSize:"25px",icon:(0,p.jsx)(I.G2h,{})})]}),(0,p.jsxs)(n.Text,{color:"red",children:[" ",R.attendes&&J.attendes&&R.attendes]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Location"}),(0,p.jsx)(s.Input,{fontSize:"sm",onChange:X,onBlur:U,value:Q.location,name:"location",placeholder:"Location",fontWeight:"500",borderColor:R.location&&J.location?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",fontSize:"sm",children:[" ",R.location&&J.location&&R.location]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Date Time",(0,p.jsx)(n.Text,{color:"red",children:"*"})]}),(0,p.jsx)(s.Input,{fontSize:"sm",type:"datetime-local",onChange:X,onBlur:U,min:z()(_).format("YYYY-MM-DD HH:mm"),value:Q.dateTime,name:"dateTime",placeholder:"Date Time",fontWeight:"500",borderColor:R.dateTime&&J.dateTime?"red.300":null}),(0,p.jsxs)(n.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",R.dateTime&&J.dateTime&&R.dateTime]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Notes"}),(0,p.jsx)(i.T,{resize:"none",fontSize:"sm",placeholder:"Notes",onChange:X,onBlur:U,value:Q.notes,name:"notes",fontWeight:"500",borderColor:R.notes&&J.notes?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",R.notes&&J.notes&&R.notes]})]})]})]}),(0,p.jsxs)(l.jl,{children:[(0,p.jsx)(r.Button,{size:"sm",variant:"brand",me:2,disabled:!!N,onClick:q,children:N?(0,p.jsx)(m.A,{}):"Save"}),(0,p.jsx)(r.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{$.resetForm(),h()},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=7936.6eef0e0e.chunk.js.map