"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[4685],{16806:(e,l,o)=>{o.r(l),o.d(l,{default:()=>M});var n=o(19754),i=o(4450),t=o(85376),d=o(22554),r=o(67682),s=o(14034),a=o(65043),c=o(86178),u=o.n(c),v=o(73216),h=o(35475),x=o(67805),m=o(79621),p=o(10216),j=o(34960),g=o(95574),b=o(63994),f=o(1887),D=o(48177),k=o(85369),T=o(90074),y=o.n(T),Y=o(89849),S=o(63516),I=o(60446),C=o.n(I),A=o(70579);const M=e=>{var l,o,c,T,I,M,w,B,z,F,G,H,W;const N=(0,v.g)(),{id:O}=N,_=JSON.parse(localStorage.getItem("user")),[E,P,V]=(0,g.h)(["Tasks","Contacts","Leads"]),[R,$]=(0,a.useState)(),{onOpen:J,onClose:L}=(0,n.j1)(),[q,U]=(0,a.useState)(!1),[Z,K]=(0,a.useState)(!1),[Q,X]=(0,a.useState)(!1),[ee,le]=(0,a.useState)(!1),oe=(0,v.Zp)(),[ne,ie]=(0,a.useState)(null),te=(new Date).toISOString().split("T")[0],de=(new Date).toISOString().split(".")[0],re=async()=>{if(O){var e,l,o;let n=await(0,m.x4)("api/task/view/",null!==O&&void 0!==O&&O.event?null===O||void 0===O||null===(e=O.event)||void 0===e||null===(l=e._def)||void 0===l||null===(o=l.extendedProps)||void 0===o?void 0:o._id:O);$(null===n||void 0===n?void 0:n.data)}},se={title:null===R||void 0===R?void 0:R.title,description:null===R||void 0===R?void 0:R.description,notes:null===R||void 0===R?void 0:R.notes,start:null===R||void 0===R?void 0:R.start,end:null===R||void 0===R?void 0:R.end},ae=(0,S.Wx)({initialValues:se,validationSchema:Y.pj,enableReinitialize:!0,onSubmit:async(e,l)=>{let{resetForm:o}=l;200===(await(0,m.yP)(`api/task/edit/${O}`,e)).status&&(ie(null),re())}}),ce=(e,l)=>{ae.setFieldValue(e,l),ie(e)},ue=e=>{ae.handleSubmit()};(0,a.useEffect)((()=>{re()}),[O,q]);return(0,A.jsxs)("div",{children:[(0,A.jsxs)(i.Grid,{templateColumns:"repeat(4, 1fr)",gap:3,id:"reports",children:[(0,A.jsx)(i.GridItem,{colSpan:{base:4},children:(0,A.jsx)(i.Heading,{size:"lg",m:3,children:(null===R||void 0===R?void 0:R.title)||""})}),(0,A.jsx)(i.GridItem,{colSpan:{base:4},children:(0,A.jsx)(p.A,{children:(0,A.jsxs)(i.Grid,{gap:4,children:[(0,A.jsx)(i.GridItem,{colSpan:2,children:(0,A.jsxs)(i.Box,{children:[(0,A.jsxs)(i.Box,{display:"flex",justifyContent:"space-between",children:[(0,A.jsx)(i.Heading,{size:"md",mb:3,children:"Task Details"}),(0,A.jsxs)(i.Flex,{id:"hide-btn",children:[(0,A.jsxs)(t.W1,{children:[("superAdmin"===_.role||(null===E||void 0===E?void 0:E.create)||(null===E||void 0===E?void 0:E.update)||(null===E||void 0===E?void 0:E.delete))&&(0,A.jsx)(t.IU,{variant:"outline",colorScheme:"blackAlpha",size:"sm",va:!0,mr:2.5,as:d.Button,rightIcon:(0,A.jsx)(s.ChevronDownIcon,{}),children:"Actions"}),(0,A.jsx)(t.Nj,{}),(0,A.jsxs)(t.cO,{minWidth:2,children:[("superAdmin"===_.role||(null===E||void 0===E?void 0:E.create))&&(0,A.jsx)(t.Dr,{onClick:()=>{J()},alignItems:"start",color:"blue",icon:(0,A.jsx)(s.AddIcon,{}),children:"Add"}),("superAdmin"===_.role||(null===E||void 0===E?void 0:E.update))&&(0,A.jsx)(t.Dr,{onClick:()=>U(!0),alignItems:"start",icon:(0,A.jsx)(s.EditIcon,{}),children:"Edit"}),(0,A.jsx)(t.Dr,{onClick:()=>{le(!0);const e=document.getElementById("reports"),l=document.getElementById("hide-btn");e?(l.style.display="none",y()().from(e).set({margin:[0,0,0,0],filename:`Task_Details_${u()().format("DD-MM-YYYY")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).save().then((()=>{le(!1),l.style.display=""}))):(console.error("Element with ID 'reports' not found."),le(!1))},alignItems:"start",icon:(0,A.jsx)(k.kl1,{}),display:"flex",style:{alignItems:"center"},children:"Print as PDF"}),("superAdmin"===_.role||(null===E||void 0===E?void 0:E.delete))&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(t.Nj,{}),(0,A.jsx)(t.Dr,{alignItems:"start",onClick:()=>X(!0),color:"red",icon:(0,A.jsx)(s.DeleteIcon,{}),children:"Delete"})]})]})]}),(0,A.jsx)(d.Button,{leftIcon:(0,A.jsx)(j.m6W,{}),size:"sm",variant:"brand",onClick:()=>oe(-1),children:"Back"})]})]}),(0,A.jsx)(b.E,{})]})}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Title "}),"title"===ne?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.Input,{id:"text",name:"title",type:"text",onChange:ae.handleChange,onBlur:ue,value:ae.values.title,borderColor:null!==ae&&void 0!==ae&&null!==(l=ae.errors)&&void 0!==l&&l.title&&null!==ae&&void 0!==ae&&null!==(o=ae.touched)&&void 0!==o&&o.title?"red.300":null,autoFocus:!0}),(0,A.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",(null===ae||void 0===ae?void 0:ae.errors.title)&&(null===ae||void 0===ae?void 0:ae.touched.title)&&(null===ae||void 0===ae?void 0:ae.errors.title)]})]}):(0,A.jsx)(i.Text,{onDoubleClick:()=>ce("title",null===R||void 0===R?void 0:R.title),children:null!==R&&void 0!==R&&R.title?null===R||void 0===R?void 0:R.title:" - "})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Related To "}),(0,A.jsx)(i.Text,{children:null!==R&&void 0!==R&&R.category?null===R||void 0===R?void 0:R.category:" - "})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task start "}),"start"===ne?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.Input,{name:"start",type:null!==R&&void 0!==R&&R.allDay?"date":"datetime-local",onChange:ae.handleChange,onBlur:ue,value:!0===R.allDay?u()(ae.values.start).format("YYYY-MM-DD"):u()(ae.values.start).format("YYYY-MM-DD HH:mm A"),autoFocus:!0,borderColor:null!==ae&&void 0!==ae&&null!==(c=ae.errors)&&void 0!==c&&c.start&&null!==ae&&void 0!==ae&&null!==(T=ae.touched)&&void 0!==T&&T.start?"red.300":null,min:null!==R&&void 0!==R&&R.allDay?C()(te).format("YYYY-MM-DD"):C()(de).format("YYYY-MM-DD HH:mm")}),(0,A.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",(null===ae||void 0===ae?void 0:ae.errors.start)&&(null===ae||void 0===ae?void 0:ae.touched.start)&&(null===ae||void 0===ae?void 0:ae.errors.start)]})]}):(0,A.jsx)(i.Text,{onDoubleClick:()=>ce("start",null===R||void 0===R?void 0:R.start),children:R&&null!==R&&void 0!==R&&R.start?!0===R.allDay?u()(R.start).format("DD-MM-YYYY"):u()(R.start).format("DD-MM-YYYY HH:mm A"):"-"})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task end  "}),"end"===ne?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.Input,{name:"end",type:null!==R&&void 0!==R&&R.allDay?"date":"datetime-local",onChange:ae.handleChange,onBlur:ue,min:ae.values.start,value:!0===R.allDay?u()(ae.values.end).format("YYYY-MM-DD"):u()(ae.values.end).format("YYYY-MM-DD HH:mm A"),autoFocus:!0,borderColor:null!==(I=ae.errors)&&void 0!==I&&I.end&&null!==(M=ae.touched)&&void 0!==M&&M.end?"red.300":null}),(0,A.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",ae.errors.end&&ae.touched.end&&ae.errors.end]})]}):(0,A.jsx)(i.Text,{onDoubleClick:()=>ce("end",null===R||void 0===R?void 0:R.end),children:!0===(null===R||void 0===R?void 0:R.allDay)?u()(null===R||void 0===R?void 0:R.end).format("DD-MM-YYYY"):u()(null===R||void 0===R?void 0:R.end).format("DD-MM-YYYY HH:mm A")})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Link "}),null!==R&&void 0!==R&&R.url?(0,A.jsx)("a",{target:"_blank",href:null===R||void 0===R?void 0:R.url,children:(0,A.jsx)(d.IconButton,{borderRadius:"10px",size:"md",icon:(0,A.jsx)(x.o9J,{})})}):"-"]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task reminder "}),(0,A.jsx)(i.Text,{children:null!==R&&void 0!==R&&R.reminder?null===R||void 0===R?void 0:R.reminder:" - "})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Assign To  "}),(0,A.jsx)(h.N_,{to:null!==R&&void 0!==R&&R.assignTo?(null===P||void 0===P?void 0:P.view)&&`/contactView/${null===R||void 0===R?void 0:R.assignTo}`:(null===V||void 0===V?void 0:V.view)&&`/leadView/${null===R||void 0===R?void 0:R.assignToLead}`,children:(0,A.jsx)(i.Text,{color:"contact"===(null===R||void 0===R?void 0:R.category)&&(null!==P&&void 0!==P&&P.view||"superAdmin"===(null===_||void 0===_?void 0:_.role))||null!==V&&void 0!==V&&V.view||"superAdmin"===(null===_||void 0===_?void 0:_.role)&&"lead"===(null===R||void 0===R?void 0:R.category)?"brand.600":"blackAlpha.900",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},children:null!==R&&void 0!==R&&R.assignToName?null===R||void 0===R?void 0:R.assignToName:" - "})})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2,md:1},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task createBy "}),(0,A.jsx)(i.Text,{children:null!==R&&void 0!==R&&R.createByName?null===R||void 0===R?void 0:R.createByName:" - "})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Description"}),"description"===ne?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.Input,{id:"text",name:"description",type:"text",onChange:ae.handleChange,onBlur:ue,value:ae.values.description,autoFocus:!0,borderColor:null!==ae&&void 0!==ae&&null!==(w=ae.errors)&&void 0!==w&&w.description&&null!==ae&&void 0!==ae&&null!==(B=ae.touched)&&void 0!==B&&B.description?"red.300":null}),(0,A.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",(null===ae||void 0===ae?void 0:ae.errors.description)&&(null===ae||void 0===ae?void 0:ae.touched.description)&&(null===ae||void 0===ae?void 0:ae.errors.description)]})]}):(0,A.jsx)(i.Text,{onDoubleClick:()=>ce("description",null===R||void 0===R?void 0:R.description),children:null!==R&&void 0!==R&&R.description?null===R||void 0===R?void 0:R.description:" - "})]}),(0,A.jsxs)(i.GridItem,{colSpan:{base:2},children:[(0,A.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task notes "}),"notes"===ne?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.Input,{id:"text",name:"notes",type:"text",onChange:ae.handleChange,onBlur:ue,value:ae.values.notes,autoFocus:!0,borderColor:null!==ae&&void 0!==ae&&null!==(z=ae.errors)&&void 0!==z&&z.notes&&null!==ae&&void 0!==ae&&null!==(F=ae.touched)&&void 0!==F&&F.notes?"red.300":null}),(0,A.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",(null===ae||void 0===ae?void 0:ae.errors.notes)&&(null===ae||void 0===ae?void 0:ae.touched.notes)&&(null===ae||void 0===ae?void 0:ae.errors.notes)]})]}):(0,A.jsx)(i.Text,{onDoubleClick:()=>ce("notes",null===R||void 0===R?void 0:R.notes),children:null!==R&&void 0!==R&&R.notes?null===R||void 0===R?void 0:R.notes:" - "})]})]})})})]}),((null===E||void 0===E?void 0:E.update)||(null===E||void 0===E?void 0:E.delete)||"superAdmin"===(null===_||void 0===_?void 0:_.role))&&(0,A.jsx)(p.A,{mt:3,children:(0,A.jsx)(i.Grid,{templateColumns:"repeat(6, 1fr)",gap:1,children:(0,A.jsx)(i.GridItem,{colStart:6,children:(0,A.jsxs)(i.Flex,{justifyContent:"right",children:[((null===E||void 0===E?void 0:E.update)||"superAdmin"===(null===_||void 0===_?void 0:_.role))&&(0,A.jsx)(d.Button,{size:"sm",onClick:()=>U(!0),leftIcon:(0,A.jsx)(s.EditIcon,{}),mr:2.5,variant:"outline",colorScheme:"green",children:"Edit"}),((null===E||void 0===E?void 0:E.delete)||"superAdmin"===(null===_||void 0===_?void 0:_.role))&&(0,A.jsx)(d.Button,{size:"sm",style:{background:"red.800"},onClick:()=>X(!0),leftIcon:(0,A.jsx)(s.DeleteIcon,{}),colorScheme:"red",children:"Delete"})]})})})}),(0,A.jsx)(f.A,{isOpen:q,onClose:()=>U(!1),viewClose:L,id:null!==O&&void 0!==O&&O.event?null===O||void 0===O||null===(G=O.event)||void 0===G||null===(H=G._def)||void 0===H||null===(W=H.extendedProps)||void 0===W?void 0:W._id:O,userAction:"edit"}),(0,A.jsx)(D.A,{isOpen:Q,onClose:()=>X(!1),type:"Task",handleDeleteData:async e=>{try{200===(await(0,m.Vn)("api/task/deleteMany",e)).status&&(oe("/task"),X(!1))}catch(l){console.log(l)}},ids:[O]})]})}},53186:(e,l,o)=>{o.d(l,{T:()=>a});var n=o(78510),i=o(59522),t=o(23216),d=o(65043);function r(){return r=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r.apply(this,arguments)}var s=["className","rows"],a=(0,i.Rf)((function(e,l){var o=(0,i.Vl)("Textarea",e),a=(0,i.MN)(e),c=a.className,u=a.rows,v=function(e,l){if(null==e)return{};var o,n,i={},t=Object.keys(e);for(n=0;n<t.length;n++)o=t[n],l.indexOf(o)>=0||(i[o]=e[o]);return i}(a,s),h=(0,n.useFormControl)(v),x=u?(0,t.cJ)(o,["h","minH","height","minHeight"]):o;return d.createElement(i.Bv.textarea,r({ref:l,rows:u},h,{className:(0,t.cx)("chakra-textarea",c),__css:x}))}));t.gt&&(a.displayName="Textarea")}}]);
//# sourceMappingURL=4685.06614bf4.chunk.js.map