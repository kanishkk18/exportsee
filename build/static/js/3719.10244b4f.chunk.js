"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[3719],{6:(e,l,n)=>{n.d(l,{A:()=>g});var t=n(57360),i=n(4450),o=n(78510),s=n(67682),a=n(95104),r=n(53186),d=n(84626),c=n(22554),x=n(19488),m=n(60446),h=n.n(m),u=n(63516),p=n(65043),j=n(97508),f=n(47503),v=n(89849),C=n(79621),b=n(42101),S=n(70579);const g=e=>{const{onClose:l,isOpen:n,fetchData:m,setAction:g}=e,k=JSON.parse(localStorage.getItem("user")),[y,D]=(0,p.useState)(!1),L=(new Date).toISOString().split(".")[0],[z,F]=(0,p.useState)([]),W=(0,j.wA)(),I={sender:null===k||void 0===k?void 0:k._id,recipient:!0!==e.lead?null===e||void 0===e?void 0:e.contactEmail:null===e||void 0===e?void 0:e.leadEmail,subject:"",message:"",createByContact:null!==e&&void 0!==e&&e.id&&!0!==(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",createByLead:null!==e&&void 0!==e&&e.id&&!0===(null===e||void 0===e?void 0:e.lead)?null===e||void 0===e?void 0:e.id:"",startDate:"",type:"message",html:"",createBy:null===k||void 0===k?void 0:k._id},B=(0,u.Wx)({initialValues:I,validationSchema:v.y4,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:n}=l;V(),n()}}),{errors:w,touched:N,values:T,handleBlur:_,handleChange:O,handleSubmit:A,setFieldValue:G}=B,V=async()=>{try{D(!0),200===(await(0,C.d_)("api/email/add",T)).status&&(e.onClose(),m(1))}catch(l){console.log(l)}finally{D(!1)}};return(0,p.useEffect)((()=>{"template"===(null===T||void 0===T?void 0:T.type)&&(async()=>{D(!0);const e=await W((0,b.t)());var l;200===e.payload.status?F(null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.data):f.oR.error("Failed to fetch data","error"),D(!1)})()}),[null===T||void 0===T?void 0:T.type]),(0,S.jsxs)(t.aF,{onClose:l,isOpen:n,isCentered:!0,children:[(0,S.jsx)(t.mH,{}),(0,S.jsxs)(t.$m,{children:[(0,S.jsx)(t.rQ,{children:"Send Email "}),(0,S.jsx)(t.s_,{}),(0,S.jsx)(t.cw,{children:(0,S.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsx)(s.Input,{fontSize:"sm",onChange:O,onBlur:_,value:T.recipient,name:"recipient",disabled:!0,placeholder:"Recipient",fontWeight:"500",borderColor:w.recipient&&N.recipient?"red.300":null}),(0,S.jsxs)(i.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",w.recipient&&N.recipient&&w.recipient]})]}),(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Subject",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsx)(s.Input,{fontSize:"sm",placeholder:"Enter subject",onChange:O,onBlur:_,value:T.subject,name:"subject",fontWeight:"500",borderColor:w.subject&&N.subject?"red.300":null}),(0,S.jsxs)(i.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",w.subject&&N.subject&&w.subject]})]}),(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,S.jsx)(i.Text,{color:"red",children:"*"})]}),(0,S.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",onChange:O,onBlur:_,min:h()(L).format("YYYY-MM-DD HH:mm"),value:T.startDate,name:"startDate",fontWeight:"500",borderColor:null!==w&&void 0!==w&&w.startDate&&null!==N&&void 0!==N&&N.startDate?"red.300":null}),(0,S.jsxs)(i.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",w.startDate&&N.startDate&&w.startDate]})]}),(0,S.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,S.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,S.jsx)(a.z6,{onChange:e=>{G("type",e)},value:T.type,children:(0,S.jsxs)(i.Stack,{direction:"row",children:[(0,S.jsx)(a.sx,{value:"message",children:"Message"}),(0,S.jsx)(a.sx,{value:"template",children:"Template"})]})})]}),(0,S.jsx)(i.GridItem,{colSpan:{base:12},children:"message"===(null===T||void 0===T?void 0:T.type)?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.T,{resize:"none",fontSize:"sm",placeholder:"Enter Message",onChange:O,onBlur:_,value:T.message,name:"message",fontWeight:"500",borderColor:w.message&&N.message?"red.300":null}),(0,S.jsxs)(i.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",w.message&&N.message&&w.message]})]}):(0,S.jsx)(d.l6,{name:"html",onChange:O,onBlur:_,value:T.html,fontWeight:"500",placeholder:"Select Template",children:null===z||void 0===z?void 0:z.map((e=>(0,S.jsx)("option",{value:null===e||void 0===e?void 0:e.html,children:null===e||void 0===e?void 0:e.templateName},e._id)))})})]})}),(0,S.jsxs)(t.jl,{children:[(0,S.jsx)(c.Button,{size:"sm",variant:"brand",onClick:A,disabled:!!y,children:y?(0,S.jsx)(x.A,{}):"Save"}),(0,S.jsx)(c.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{B.resetForm(),l()},children:"Close"})]})]})]})}},9250:(e,l,n)=>{n.d(l,{A:()=>f});var t=n(57360),i=n(4450),o=n(78510),s=n(67682),a=n(53186),r=n(22554),d=n(19488),c=n(60446),x=n.n(c),m=n(63516),h=n(65043),u=n(89849),p=n(79621),j=n(70579);const f=e=>{const{onClose:l,isOpen:n,fetchData:c,setAction:f,cData:v,LData:C}=e,[b,S]=(0,h.useState)(!1),g=(new Date).toISOString().split(".")[0],k=JSON.parse(localStorage.getItem("user")),y={sender:null===k||void 0===k?void 0:k._id,recipient:"",callDuration:"",callNotes:"",createByContact:"",createByLead:"",startDate:"",createBy:null===k||void 0===k?void 0:k._id},D=(0,m.Wx)({initialValues:y,validationSchema:u.Ar,onSubmit:(e,l)=>{let{resetForm:n}=l;N(),n()}}),{errors:L,touched:z,values:F,handleBlur:W,handleChange:I,handleSubmit:B,setFieldValue:w}=D,N=async()=>{try{S(!0),200===(await(0,p.d_)("api/phoneCall/add",F)).status&&(e.onClose(),c(1))}catch(l){console.log(l)}finally{S(!1)}};return(0,h.useEffect)((()=>{(async()=>{C&&C._id&&!0===e.lead?(w("recipient",C.leadPhoneNumber),w("createByLead",null===e||void 0===e?void 0:e.id),F.recipient=C.leadPhoneNumber):v&&v._id&&!0!==e.lead&&(w("recipient",null===v||void 0===v?void 0:v.phoneNumber),w("createByContact",null===e||void 0===e?void 0:e.id),F.recipient=null===v||void 0===v?void 0:v.phoneNumber)})()}),[e.id,v,C]),(0,j.jsxs)(t.aF,{onClose:l,isOpen:n,isCentered:!0,children:[(0,j.jsx)(t.mH,{}),(0,j.jsxs)(t.$m,{children:[(0,j.jsx)(t.rQ,{children:"Add Call "}),(0,j.jsx)(t.s_,{}),(0,j.jsx)(t.cw,{children:(0,j.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,j.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,j.jsx)(i.Text,{color:"red",children:"*"})]}),(0,j.jsx)(s.Input,{fontSize:"sm",type:"number",disabled:!0,onChange:I,onBlur:W,value:F.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:L.recipient&&z.recipient?"red.300":null}),(0,j.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",L.recipient&&z.recipient&&L.recipient]})]}),(0,j.jsxs)(i.GridItem,{colSpan:{base:12,md:6},children:[(0,j.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Start Date",(0,j.jsx)(i.Text,{color:"red",children:"*"})]}),(0,j.jsx)(s.Input,{type:"datetime-local",fontSize:"sm",onChange:I,onBlur:W,min:x()(g).format("YYYY-MM-DD HH:mm"),value:F.startDate,name:"startDate",fontWeight:"500",borderColor:null!==L&&void 0!==L&&L.startDate&&null!==z&&void 0!==z&&z.startDate?"red.300":null}),(0,j.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",L.startDate&&z.startDate&&L.startDate]})]}),(0,j.jsxs)(i.GridItem,{colSpan:{base:12,md:6},children:[(0,j.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,j.jsx)(i.Text,{color:"red",children:"*"})]}),(0,j.jsx)(s.Input,{fontSize:"sm",onChange:I,onBlur:W,value:F.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:L.callDuration&&z.callDuration?"red.300":null}),(0,j.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",L.callDuration&&z.callDuration&&L.callDuration]})]}),(0,j.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,j.jsx)(a.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:I,onBlur:W,value:F.callNotes,name:"callNotes",fontWeight:"500",borderColor:L.callNotes&&z.callNotes?"red.300":null}),(0,j.jsxs)(i.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",L.callNotes&&z.callNotes&&L.callNotes]})]})]})}),(0,j.jsxs)(t.jl,{children:[(0,j.jsx)(r.Button,{size:"sm",variant:"brand",disabled:!!b,onClick:B,children:b?(0,j.jsx)(d.A,{}):"Save"}),(0,j.jsx)(r.Button,{size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",onClick:()=>{D.resetForm(),l()},children:"Close"})]})]})]})}},14406:(e,l,n)=>{n(86178),n(65043),n(71094),n(76914),n(78152),n(9250),n(52853),n(70579)},20962:(e,l,n)=>{n.d(l,{A:()=>F});var t=n(14034),i=n(4450),o=n(85376),s=n(858),a=n(65043),r=n(20243),d=n(1009),c=n(34960),x=n(27149),m=n(73216),h=n(57360),u=n(22554),p=n(79621),j=n(70579);const f=e=>(0,j.jsx)("div",{children:(0,j.jsxs)(h.aF,{onClose:e.onClose,isOpen:e.isOpen,isCentered:!0,children:[(0,j.jsx)(h.mH,{}),(0,j.jsxs)(h.$m,{children:[(0,j.jsxs)(h.rQ,{children:["Delete Document","one"===e.method?"":"s"]}),(0,j.jsx)(h.s_,{}),(0,j.jsxs)(h.cw,{children:["Are You Sure To Delete selected Document","one"===e.method?"":"s"," ?"]}),(0,j.jsxs)(h.jl,{children:[(0,j.jsx)(u.Button,{size:"sm",colorScheme:"red",mr:2,onClick:async()=>{if("one"===e.method)e.deleteFile(e.id),e.onClose(!1);else if("many"===e.method)try{200===(await(0,p.Vn)(e.url,e.data)).status&&(e.setSelectedValues([]),e.onClose(!1))}catch(l){console.log(l)}},children:"Yes"}),(0,j.jsx)(u.Button,{size:"sm",variant:"outline",onClick:()=>{e.onClose(!1)},children:"No"})]})]})]})});var v=n(78510),C=n(95104),b=n(84626),S=n(63516),g=n(47503),k=n(49565),y=n(91125),D=n(3388);const L=e=>{const{setLinkDocument:l}=e,[n,o]=(0,a.useState)(!1),[s,r]=(0,a.useState)([]),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)(!1),f=JSON.parse(localStorage.getItem("user")),L=(0,S.Wx)({initialValues:{linkWith:"",linkContact:"",linkLead:""},onSubmit:(e,l)=>{let{resetForm:n}=l;_(),n()}}),{errors:z,touched:F,values:W,handleBlur:I,handleChange:B,handleSubmit:w,setFieldValue:N,resetForm:T}=L,_=async()=>{try{o(!0);let t=W.linkContact?{linkContact:W.linkContact}:{linkLead:W.linkLead},i=await(0,p.d_)(`api/document/link-document/${e.id}`,t);var n;if(i&&200===i.status)l((e=>!e)),e.onClose();else g.oR.error(null===(n=i.response.data)||void 0===n?void 0:n.message)}catch(t){console.log(t)}finally{o(!1)}};return(0,a.useEffect)((()=>{(async()=>{if("Contact"===W.linkWith){let e=await(0,p.x4)("superAdmin"===f.role?"api/contact/":`api/contact/?createBy=${f._id}`);W.createBy=null===e||void 0===e?void 0:e._id,r((l=>{var n;return[...(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>({label:e.firstName+" "+e.lastName,value:e._id}))))||[]]}))}else if("lead"===W.linkWith){let e=await(0,p.x4)("superAdmin"===f.role?"api/lead/":`api/lead/?createBy=${f._id}`);W.createBy=null===e||void 0===e?void 0:e._id,r((l=>{var n;return[...(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>({label:e.leadName,value:e._id}))))||[]]}))}})()}),[W.linkWith]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(h.aF,{onClose:e.onClose,isOpen:e.isOpen,children:[(0,j.jsx)(h.mH,{}),(0,j.jsxs)(h.$m,{children:[(0,j.jsx)(h.rQ,{children:"Link With Document"}),(0,j.jsx)(h.s_,{}),(0,j.jsx)(h.cw,{children:(0,j.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,j.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(v.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link With"}),(0,j.jsx)(C.z6,{onChange:e=>{T(),N("linkWith",e)},value:W.linkWith,children:(0,j.jsxs)(i.Stack,{direction:"row",children:[(0,j.jsx)(C.sx,{value:"Contact",children:"Contact"}),(0,j.jsx)(C.sx,{value:"lead",children:"Lead"})]})}),(0,j.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",z.linkWith&&F.linkWith&&z.linkWith]})]}),"Contact"===W.linkWith?(0,j.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(v.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Contact"}),(0,j.jsxs)(i.Flex,{children:[(0,j.jsx)(b.l6,{value:W.linkContact,name:"linkContact",onChange:B,mb:z.linkContact&&F.linkContact?void 0:"10px",fontWeight:"500",placeholder:"Link Contact",borderColor:z.linkContact&&F.linkContact?"red.300":null,children:null===s||void 0===s?void 0:s.map((e=>(0,j.jsx)("option",{value:e.value,children:"Contact"===W.linkWith&&`${e.label}`},e.value)))}),(0,j.jsx)(u.IconButton,{onClick:()=>c(!0),ml:2,fontSize:"25px",icon:(0,j.jsx)(D.G2h,{})}),(0,j.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",z.linkContact&&F.linkContact&&z.linkContact]})]})]}):"lead"===W.linkWith&&(0,j.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(v.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Lead"}),(0,j.jsxs)(i.Flex,{children:[(0,j.jsx)(b.l6,{value:W.linkLead,name:"linkLead",onChange:B,mb:z.linkLead&&F.linkLead?void 0:"10px",fontWeight:"500",placeholder:"Link Lead",borderColor:z.linkLead&&F.linkLead?"red.300":null,children:null===s||void 0===s?void 0:s.map((e=>(0,j.jsx)("option",{value:e.value,children:"lead"===W.linkWith&&`${e.label}`},e.value)))}),(0,j.jsx)(u.IconButton,{onClick:()=>c(!0),ml:2,fontSize:"25px",icon:(0,j.jsx)(D.G2h,{})}),(0,j.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",z.linkLead&&F.linkLead&&z.linkLead]})]}),(0,j.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",z.linkLead&&F.linkLead&&z.linkLead]})]})]})}),(0,j.jsxs)(h.jl,{children:[(0,j.jsx)(u.Button,{size:"sm",colorScheme:"brand",rightIcon:(0,j.jsx)(t.LinkIcon,{}),mr:2,onClick:_,children:"Link"}),(0,j.jsx)(u.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>{e.onClose(!1),T()},children:"Cancel"})]})]})]}),(0,j.jsx)(k.A,{data:s,isOpen:d,onClose:c,fieldName:"linkContact",setFieldValue:N}),(0,j.jsx)(y.A,{data:s,isOpen:x,onClose:m,fieldName:"linkLead",setFieldValue:N})]})};var z=n(17368);const F=e=>{let{data:l,deleteFile:n,item:h,download:u,name:p,isFile:v,children:C,setLinkDocument:b,from:S}=e;const[g,k]=(0,a.useState)(!1),[y,D]=(0,a.useState)(!1),[F,W]=(0,a.useState)(!1),[I,B]=(0,a.useState)(!1),w=(0,m.Zp)(),N=!v&&!!C;JSON.parse(localStorage.getItem("user"));return(0,j.jsxs)(i.List,{width:"100%",children:[(0,j.jsx)(i.ListItem,{alignItems:"center",display:"flex",children:(0,j.jsxs)(i.Text,{alignItems:"center",justifyContent:"space-between",display:"flex",width:"100%",onClick:N?()=>{k(!g)}:void 0,_hover:{cursor:"pointer",textDecoration:"none"},children:[(0,j.jsxs)(i.Flex,{width:"70%",alignItems:"center",children:[(0,j.jsx)(i.ListIcon,{as:v?d.QuH:r.NVk}),N&&(g?(0,j.jsx)(d.fK4,{}):(0,j.jsx)(d.fOo,{})),p]}),null!==h&&void 0!==h&&h.createByName?(0,j.jsxs)(i.Text,{children:["(",null===h||void 0===h?void 0:h.createByName,") "]}):null,!N&&(0,j.jsx)(i.Flex,{justifyContent:"right",width:"100%",children:(0,j.jsxs)(o.W1,{isLazy:!0,children:[(0,j.jsx)(o.IU,{children:(0,j.jsx)(z.txp,{})}),(0,j.jsxs)(o.cO,{position:"absolute",right:-5,pl:"0.5em",minW:"fit-content",children:[!S&&null!==l&&void 0!==l&&l.linkContact?(0,j.jsx)(o.Dr,{pr:2,w:"180px",onClick:()=>w(`/contactView/${null===l||void 0===l?void 0:l.linkContact}`),icon:(0,j.jsx)(c.oau,{fontSize:15}),children:"Linked Contact"}):!S&&(null===l||void 0===l?void 0:l.linkLead)&&(0,j.jsx)(o.Dr,{pr:2,w:"180px",onClick:()=>w(`/leadView/${null===l||void 0===l?void 0:l.linkLead}`),icon:(0,j.jsx)(x.ju$,{fontSize:15}),children:"Linked Lead"}),!S&&(0,j.jsx)(o.Dr,{pr:10,alignItems:"start",color:"blue",onClick:()=>(e=>{W(!0),B(e)})(null===l||void 0===l?void 0:l._id),icon:(0,j.jsx)(t.LinkIcon,{fontSize:15}),children:"Link"}),function(e){const l=e.substring(e.lastIndexOf(".")).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp"].includes(l)}(null===l||void 0===l?void 0:l.img)&&(0,j.jsx)(o.Dr,{alignItems:"start",pr:10,color:"green",onClick:()=>window.open(null===l||void 0===l?void 0:l.img),icon:(0,j.jsx)(t.ViewIcon,{fontSize:15}),children:"View"}),(0,j.jsx)(o.Dr,{pr:10,alignItems:"start",onClick:()=>(e=>{u(e)})(null===l||void 0===l?void 0:l._id),icon:(0,j.jsx)(t.DownloadIcon,{fontSize:15}),children:"Download"}),!S&&(0,j.jsx)(o.Dr,{alignItems:"start",pr:10,color:"red",onClick:()=>(e=>{D(!0),B(e)})(null===l||void 0===l?void 0:l._id),icon:(0,j.jsx)(t.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})}),(0,j.jsx)(f,{isOpen:y,onClose:D,method:"one",deleteFile:n,id:I}),(0,j.jsx)(L,{isOpen:F,setLinkDocument:b,onClose:W,id:I})]})}),N&&(0,j.jsx)(s.SD,{in:g,animateOpacity:!0,children:(0,j.jsx)(i.List,{styleType:"disc",ml:4,children:C})})]})}},57818:(e,l,n)=>{n.d(l,{A:()=>b});var t=n(57360),i=n(4450),o=n(78510),s=n(67682),a=n(22554),r=n(65043),d=n(63516),c=n(19488),x=n(79621),m=n(89849);const h=e=>{const l=new FormData;return Object.entries(e).forEach((e=>{let[n,t]=e;l.append(n,t)})),e.files.forEach((e=>{null===l||void 0===l||l.append("files",e)})),l};var u=n(31206),p=n(3458),j=n(71997),f=n(27149),v=n(70579);function C(e){const{used:l,total:n,count:t,...o}=e,s=(0,u.dU)("secondaryGray.900","white"),a=(0,u.dU)("brand.500","white");return(0,v.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,v.jsx)(i.GridItem,{colSpan:{base:12,"2xl":5},children:(0,v.jsx)(j.A,{w:{base:"100%","2xl":"240px"},me:"36px",minH:200,height:"100%",onFileSelect:e.onFileSelect,content:(0,v.jsxs)(i.Box,{children:[(0,v.jsx)(p.In,{as:f.vpy,w:"70px",h:"70px",color:a}),(0,v.jsx)(i.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,v.jsx)(i.Text,{fontSize:"xl",fontWeight:"700",color:a,children:"Upload Files"})}),(0,v.jsx)(i.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:t>0&&(0,v.jsxs)(i.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",t]})})]})})}),(0,v.jsx)(i.GridItem,{colSpan:{base:12,"2xl":7},children:(0,v.jsxs)(i.Flex,{direction:"column",children:[(0,v.jsx)(i.Text,{color:s,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px","2xl":"50px"},children:"Upload Files"}),(0,v.jsx)(i.Text,{color:"gray.400",fontSize:"md",my:{base:"auto","2xl":"10px"},mx:"auto",textAlign:"start",children:"Accepted File Types (Images, PDFs, Word docs, Powerpoint, Excel, ZIP, and video files - 15MB max)"})]})})]})}const b=e=>{let{setAddDocument:l,addDocument:n,linkId:u,from:p,setAction:j,fetchData:f}=e;const[b,S]=(0,r.useState)(!1),g=JSON.parse(localStorage.getItem("user")),k={folderName:"",files:"",filename:"",linkLead:"lead"===p&&u,linkContact:"contact"===p&&u,createBy:g._id},y=(0,d.Wx)({initialValues:k,validationSchema:m.L8,onSubmit:(e,l)=>{let{resetForm:n}=l;N()}}),{errors:D,touched:L,values:z,handleBlur:F,handleChange:W,handleSubmit:I,setFieldValue:B,resetForm:w}=y,N=async()=>{try{S(!0);const e=h(z);let n=await(0,x.d_)("lead"===p?"api/document/addDocumentLead":"api/document/addDocumentContact",e);n&&200===n.status&&(y.resetForm(),f(2),l(!1))}catch(e){console.log(e)}finally{S(!1)}};return(0,v.jsxs)(t.aF,{onClose:()=>l(!1),isOpen:n,isCentered:!0,children:[(0,v.jsx)(t.mH,{}),(0,v.jsxs)(t.$m,{maxWidth:"2xl",children:[(0,v.jsx)(t.rQ,{}),(0,v.jsx)(t.s_,{}),(0,v.jsxs)(t.cw,{children:[(0,v.jsxs)(i.Box,{children:[(0,v.jsxs)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Folder Name",(0,v.jsx)(i.Text,{color:"red",children:"*"})]}),(0,v.jsx)(s.Input,{fontSize:"sm",onChange:W,value:z.folderName,name:"folderName",placeholder:"Enter Folder Name",fontWeight:"500",borderColor:null!==D&&void 0!==D&&D.folderName&&null!==L&&void 0!==L&&L.folderName?"red.300":null}),(0,v.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",D.folderName&&L.folderName&&D.folderName]})]}),(0,v.jsxs)(i.Box,{children:[(0,v.jsx)(o.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"File Name"}),(0,v.jsx)(s.Input,{fontSize:"sm",onChange:W,value:z.filename,name:"filename",placeholder:"Enter File Name",fontWeight:"500",borderColor:null!==D&&void 0!==D&&D.filename&&null!==L&&void 0!==L&&L.filename?"red.300":null}),(0,v.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",D.filename&&L.filename&&D.filename]})]}),(0,v.jsx)(C,{count:z.files.length,onFileSelect:e=>B("files",e)}),"              "]}),(0,v.jsxs)(t.jl,{children:[(0,v.jsx)(a.Button,{size:"sm",variant:"brand",mr:2,onClick:I,disabled:!!b,children:b?(0,v.jsx)(c.A,{}):"Save"}),(0,v.jsx)(a.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>{l(!1),w()},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=3719.10244b4f.chunk.js.map