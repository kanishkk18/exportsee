"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[6266],{16266:(e,l,s)=>{s.r(l),s.d(l,{default:()=>O});var t=s(14034),i=s(31206),n=s(4450),o=s(22554),a=s(35066),d=s(49292),r=s(10216),c=s(65043),m=s(79621),u=s(57360),x=s(32892),h=s(78510),j=s(67682),v=s(19488),p=s(63516),f=s(63994),g=s(80899);const S=g.Ik({moduleName:g.Yj().min(2).required("Name is required")});var C=s(71997),w=s(47503),b=s(81380),y=s(97508),z=s(70579);const N=e=>{const{onClose:l,isOpen:s,fetchData:t,selectedId:i,editdata:a,setAction:d}=e,[r,g]=(0,c.useState)(!1),N=(0,y.wA)(),I={moduleName:null!==a&&void 0!==a&&a.moduleName?null===a||void 0===a?void 0:a.moduleName:"",icon:""},A=(0,p.Wx)({initialValues:I,validationSchema:S,enableReinitialize:!0,onSubmit:(e,l)=>{let{resetForm:s}=l;F(),s()}}),F=async()=>{let e=await(0,m.yP)(`api/custom-field/change-module-name/${i}`,D);var s,n,o;200===e.status?(await N((0,b.K)()),l(),t(),d((e=>!e)),w.oR.success(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)):w.oR.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)},{errors:B,touched:k,values:D,handleBlur:T,handleChange:W,handleSubmit:G,setFieldValue:O}=A;return(0,z.jsx)("div",{children:(0,z.jsxs)(u.aF,{onClose:l,isOpen:s,isCentered:!0,size:"2xl",children:[(0,z.jsx)(u.mH,{}),(0,z.jsxs)(u.$m,{children:[(0,z.jsx)(u.rQ,{children:"Edit Module Name "}),(0,z.jsx)(u.s_,{}),(0,z.jsx)(f.E,{}),(0,z.jsx)(u.cw,{children:(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,z.jsx)(n.GridItem,{colSpan:{base:12},children:(0,z.jsxs)("div",{className:"imageCard",style:{margin:"10px"},children:[(0,z.jsx)(x._V,{src:null===a||void 0===a?void 0:a.icon,height:"20%",width:"20%"}),(0,z.jsx)("div",{className:"imageContent",children:(0,z.jsx)(C.A,{borderRadius:"0",isMultipleAllow:!1,onFileSelect:e=>(async e=>{try{g(!0);const n=new FormData;n.append("icon",null===e||void 0===e?void 0:e[0]);const o=await(0,m.yP)(`api/custom-field/change-icon/${null===a||void 0===a?void 0:a._id}`,n);var s,t,i;200===o.status?(await N((0,b.K)()),l(),d((e=>!e)),w.oR.success(null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.message)):w.oR.error(null===o||void 0===o||null===(t=o.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)}catch(n){console.log(n)}finally{g(!1)}})(e),content:(0,z.jsx)(o.Button,{size:"sm",variant:"brand",children:"Change"})})})]})}),(0,z.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,z.jsx)(h.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"2px",children:"Name"}),(0,z.jsx)(j.Input,{fontSize:"sm",onChange:W,onBlur:T,value:D.moduleName,name:"moduleName",placeholder:"Enter Name",fontWeight:"500",borderColor:B.moduleName&&k.moduleName?"red.300":null}),(0,z.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",B.moduleName&&k.moduleName&&B.moduleName]})]})]})})}),(0,z.jsxs)(u.jl,{children:[(0,z.jsx)(o.Button,{colorScheme:"brand",size:"sm",mr:2,disabled:!!r,onClick:G,children:r?(0,z.jsx)(v.A,{}):"Update"}),(0,z.jsx)(o.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:l,children:"Close"})]})]})]})})},I=e=>{var l,s;const{onClose:i,isOpen:a,selectedId:d,fetchData:r,setAction:m}=e,[x,h]=(0,c.useState)(!1),[j,p]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1);return(0,z.jsxs)("div",{children:[(0,z.jsxs)(u.aF,{onClose:i,isOpen:a,isCentered:!0,size:"lg",children:[(0,z.jsx)(u.mH,{}),(0,z.jsxs)(u.$m,{children:[(0,z.jsxs)(u.rQ,{textTransform:"capitalize",children:[null===j||void 0===j?void 0:j.name," "]}),(0,z.jsx)(u.s_,{}),(0,z.jsx)(u.cw,{children:(0,z.jsx)(n.Box,{children:(0,z.jsx)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,z.jsx)(n.GridItem,{colSpan:{base:12},children:(0,z.jsxs)(n.Flex,{children:[(0,z.jsx)(n.Text,{fontWeight:"bold",pr:2,textTransform:"capitalize",children:"require :"}),(0,z.jsx)(n.Text,{children:null!==j&&void 0!==j&&j.validations&&(null===j||void 0===j||null===(l=j.validations)||void 0===l?void 0:l.length)>0&&!0===(null===j||void 0===j||null===(s=j.validations[0])||void 0===s?void 0:s.require)?"True":"False"})]})})})})}),(0,z.jsxs)(u.jl,{children:[(0,z.jsx)(o.Button,{variant:"outline",colorScheme:"green",size:"sm",me:2,onClick:()=>{i(),g(!0)},leftIcon:(0,z.jsx)(t.EditIcon,{}),children:"Edit"}),(0,z.jsx)(o.Button,{colorScheme:"red",size:"sm",mr:2,disabled:!!x,leftIcon:(0,z.jsx)(t.DeleteIcon,{}),children:x?(0,z.jsx)(v.A,{}):"Delete"})]})]})]}),(0,z.jsx)(N,{isOpen:f,onClose:()=>{g(!1)},selectedId:e.selectedId,editdata:j,setAction:m,fetchData:r})]})};var A=s(73216),F=s(3458),B=s(27149),k=s(55687);const D=e=>{const{onClose:l,isOpen:s,fetchData:t,setAction:a}=e,[d,r]=(0,c.useState)(!1),x=(0,i.dU)("brand.500","white"),f=(0,y.wA)(),g=(0,p.Wx)({initialValues:{moduleName:"",icon:""},validationSchema:S,onSubmit:(e,l)=>{let{resetForm:s}=l;_()}}),{errors:N,touched:I,values:A,handleBlur:D,handleChange:T,handleSubmit:W,setFieldValue:G,resetForm:O}=g,_=async()=>{try{var e;r(!0);const s=new FormData;s.append("moduleName",null===A||void 0===A?void 0:A.moduleName),s.append("icon",null===A||void 0===A||null===(e=A.icon)||void 0===e?void 0:e[0]);let i=await(0,m.d_)("api/custom-field/add-module",s);200===i.status?(t(),await f((0,b.K)()),await f((0,k.C)()),l(),O(),a((e=>!e))):w.oR.error(i.response.data.message)}catch(s){s.response&&s.response.data?w.oR.error(s.response.data.message):w.oR.error("An error occurred while processing your request.")}finally{r(!1)}};return(0,z.jsx)("div",{children:(0,z.jsxs)(u.aF,{onClose:l,isOpen:s,isCentered:!0,size:"2xl",children:[(0,z.jsx)(u.mH,{}),(0,z.jsxs)(u.$m,{children:[(0,z.jsx)(u.rQ,{children:"Add Module"}),(0,z.jsx)(u.s_,{}),(0,z.jsx)(u.cw,{children:(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,z.jsx)(n.GridItem,{colSpan:{base:12},children:(0,z.jsx)(C.A,{w:{base:"100%"},me:"36px",minH:100,img:"Property Photos"===e.text?"img":"",isMultipleAllow:!1,height:"100%",onFileSelect:e=>G("icon",e),content:(0,z.jsxs)(n.Box,{children:[(0,z.jsx)(F.In,{as:B.vpy,w:"50px",h:"50px",color:x}),(0,z.jsx)(n.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,z.jsx)(n.Text,{fontSize:"sm",fontWeight:"700",color:x,children:"Upload File"})}),(null===A||void 0===A?void 0:A.icon.length)>0&&(0,z.jsxs)(n.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",null===A||void 0===A?void 0:A.icon.length]})]})})}),(0,z.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,z.jsxs)(h.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"2px",children:["Name",(0,z.jsx)(n.Text,{color:"red",children:"*"})]}),(0,z.jsx)(j.Input,{fontSize:"sm",onChange:T,onBlur:D,value:A.moduleName,name:"moduleName",placeholder:"Enter Name",fontWeight:"500",borderColor:N.moduleName&&I.moduleName?"red.300":null}),(0,z.jsxs)(n.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",N.moduleName&&I.moduleName&&N.moduleName]})]})]})})}),(0,z.jsxs)(u.jl,{children:[(0,z.jsx)(o.Button,{colorScheme:"brand",size:"sm",mr:2,disabled:!!d,onClick:W,children:d?(0,z.jsx)(v.A,{}):"Save"}),(0,z.jsx)(o.Button,{sx:{textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{l(),O()},children:"Close"})]})]})]})})};var T=s(34960),W=s(52853),G=s(48177);const O=()=>{const e=(0,A.Zp)(),[l,s]=(0,c.useState)(!1),[u,x]=(0,c.useState)(!1),[h,j]=(0,c.useState)(!1),[p,f]=(0,c.useState)(!1),[g,S]=(0,c.useState)(!1),[C,w]=(0,c.useState)(),[F,B]=(0,c.useState)([]),[O,_]=(0,c.useState)([]),[R,E]=(0,c.useState)([]),[M,V]=(0,c.useState)(!1),q=(0,i.dU)("gray.500","white"),[H,K]=(0,c.useState)(""),$=(0,y.wA)(),P=async()=>{V(!0);try{let e=await(0,m.x4)("api/custom-field");_(null===e||void 0===e?void 0:e.data),V(!1)}catch(e){}};(0,c.useEffect)((()=>{P()}),[g]);const U=(e,l)=>{K(l),w(null===e||void 0===e?void 0:e._id),f(!p)};return(0,z.jsxs)("div",{children:[(0,z.jsxs)(n.Flex,{justifyContent:"end",mb:3,children:[R.length>0&&(0,z.jsx)(o.Button,{variant:"outline",colorScheme:"brand",color:"red",mr:2,leftIcon:(0,z.jsx)(t.DeleteIcon,{}),onClick:()=>{U("","many")},size:"sm",children:"Delete"}),(0,z.jsx)(o.Button,{size:"sm",variant:"brand",me:1,onClick:()=>{j(!u)},leftIcon:(0,z.jsx)(t.AddIcon,{}),children:"Add New"}),(0,z.jsx)(o.Button,{size:"sm",variant:"brand",onClick:()=>e(-1),leftIcon:(0,z.jsx)(T.m6W,{}),children:" Back"})]}),M?(0,z.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:q,fontSize:"sm",fontWeight:"700",children:(0,z.jsx)(v.A,{})}):O&&O.length>0?(0,z.jsx)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:O&&(null===O||void 0===O?void 0:O.map(((e,i)=>(0,z.jsx)(n.GridItem,{rowSpan:2,colSpan:{base:12,md:6,lg:3},children:(0,z.jsx)(r.A,{children:(0,z.jsxs)(n.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,z.jsxs)(n.Flex,{children:[(0,z.jsx)(a.Sc,{colorScheme:"brandScheme",value:R,isChecked:R.includes(null===e||void 0===e?void 0:e._id),onChange:l=>((e,l)=>{e.target.checked?E((e=>[...e,l])):E((e=>e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e._id),me:"10px"}),(0,z.jsx)(d.m,{hasArrow:!0,label:null===e||void 0===e?void 0:e.moduleName,bg:"gray.200",color:"gray",textTransform:"capitalize",fontSize:"sm",children:(0,z.jsx)(n.Heading,{size:"md",fontWeight:"500",sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"6rem",overflow:"hidden",textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.moduleName})})]}),(0,z.jsxs)(n.Flex,{children:[(0,z.jsx)(o.Button,{size:"sm",variant:"outline",me:2,color:"green",onClick:()=>(e=>{w(null===e||void 0===e?void 0:e._id),B(e),s(!l)})(e),children:(0,z.jsx)(t.EditIcon,{})}),(0,z.jsx)(o.Button,{size:"sm",variant:"outline",me:2,color:"red",onClick:()=>U(e,"one"),children:(0,z.jsx)(t.DeleteIcon,{})})]})]})})},i))))}):(0,z.jsx)(r.A,{mt:"5",children:(0,z.jsx)(n.Text,{textAlign:"center",width:"100%",color:"gray.500",fontSize:"sm",fontWeight:"700",children:(0,z.jsx)(W.A,{})})}),(0,z.jsx)(D,{isOpen:h,onClose:()=>{j(!1)},fetchData:P,setAction:S}),(0,z.jsx)(N,{isOpen:l,onClose:()=>{s(!1)},selectedId:C,editdata:F,setAction:S,fetchData:P}),(0,z.jsx)(G.A,{isOpen:p,onClose:()=>f(!1),type:"Module",handleDeleteData:async(e,l)=>{if("one"===H)try{if(e){V(!0);200===(await(0,m.Gx)("api/custom-field/module/",e)).status&&(await $((0,b.K)()),f(!1),P(),await $((0,k.C)()))}}catch(s){console.log(s)}finally{V(!1)}else if("many"===H)try{V(!0),200===(await(0,m.Vn)("api/custom-field/deleteMany-Module",l)).status&&(await $((0,b.K)()),E([]),f(!1),P(),await $((0,k.C)()))}catch(s){console.log(s)}finally{V(!1)}},ids:C,selectedValues:R}),(0,z.jsx)(I,{isOpen:u,onClose:()=>{x(!1)},selectedId:C,setAction:S,fetchData:P})]})}}}]);
//# sourceMappingURL=6266.cfde741e.chunk.js.map