"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[4387],{12280:(e,l,i)=>{i.r(l),i.d(l,{default:()=>V});var t=i(14034),n=i(19754),a=i(4450),o=i(85376),s=i(22554),d=i(90074),r=i.n(d),c=i(86178),u=i.n(c),v=i(65043),x=i(17368),h=i(97508),m=i(73216),p=i(47503),g=i(79621),j=i(48177),b=i(88031),f=i(95574),y=i(75343),S=i(24450),T=i(57360),w=i(19488),N=i(63516),C=i(23848),A=i(70579);const I=e=>{const{onClose:l,isOpen:i,text:t,customFields:n}=e,[o,d]=(0,v.useState)(!1),r=(0,m.Zp)(),c=(0,N.Wx)({initialValues:{invoices:""},onSubmit:(e,l)=>{let{resetForm:i}=l;y(),i()}}),{errors:u,touched:x,values:h,handleBlur:p,handleChange:g,handleSubmit:j,setFieldValue:b,resetForm:f}=c,y=async()=>{try{d(!0),f(),h.invoices&&(l(),r("/invoicesImport",{state:{fileData:h.invoices,customFields:n}}))}catch(e){console.log(e)}finally{d(!1)}};return(0,A.jsxs)(T.aF,{onClose:l,isOpen:i,isCentered:!0,children:[(0,A.jsx)(T.mH,{}),(0,A.jsxs)(T.$m,{children:[(0,A.jsx)(T.rQ,{children:"Import Invoices"}),(0,A.jsx)(T.s_,{}),(0,A.jsx)(T.cw,{children:(0,A.jsx)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:(0,A.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,A.jsx)(C.A,{count:h.invoices.length,onFileSelect:e=>b("invoices",e),text:t}),(0,A.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",u.invoices&&x.invoices&&(0,A.jsxs)(A.Fragment,{children:["Please Select ",t]})]})]})})}),(0,A.jsxs)(T.jl,{children:[(0,A.jsx)(s.Button,{size:"sm",variant:"brand",onClick:j,disabled:!!o,children:o?(0,A.jsx)(w.A,{}):"Save"}),(0,A.jsx)(s.Button,{sx:{marginLeft:2,textTransform:"capitalize"},variant:"outline",colorScheme:"red",size:"sm",onClick:()=>{l(),c.resetForm()},children:"Close"})]})]})]})};var _=i(80899),k=i(78510),D=i(67682),z=i(84626),F=i(43017);const O=e=>{const{state:l,allData:i,advanceSearch:t,setAdvanceSearch:n,isLoding:o,setSearchedData:d,setDisplaySearchData:r,setSearchClear:c,setSearchbox:u}=e,v=(0,h.wA)(),x=_.Ik({invoiceNumber:_.Yj(),title:_.Yj(),status:_.Yj(),contactName:_.Yj(),accountName:_.Yj(),grandTotal:_.Yj()}),m=(0,N.Wx)({initialValues:{invoiceNumber:"",title:"",status:"",contactName:"",accountName:"",grandTotal:""},validationSchema:x,onSubmit:(e,l)=>{let{resetForm:t}=l;v((0,F.gB)(e)),v((0,F.DW)({values:e,allData:i,type:"invoice"}));const a=[{name:["invoiceNumber"],value:e.invoiceNumber},{name:["title"],value:e.title},{name:["status"],value:e.status},{name:["contactName"],value:e.contactName},{name:["accountName"],value:e.accountName},{name:["grandTotal"],value:e.grandTotal}];v((0,F.Tr)(a.filter((e=>e.value)))),r(!0),n(!1),t(),u("")}}),{errors:p,touched:g,values:j,handleBlur:b,handleChange:f,handleSubmit:y,setFieldValue:S,resetForm:C,dirty:I}=m;return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(T.aF,{onClose:()=>{n(!1),C()},isOpen:t,isCentered:!0,children:[(0,A.jsx)(T.mH,{}),(0,A.jsxs)(T.$m,{children:[(0,A.jsx)(T.rQ,{children:"Advance Search"}),(0,A.jsx)(T.s_,{onClick:()=>{n(!1),C()}}),(0,A.jsx)(T.cw,{children:(0,A.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",mb:3,gap:2,children:[(0,A.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,A.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Invoice Number"}),(0,A.jsx)(D.Input,{fontSize:"sm",onChange:f,onBlur:b,value:null===j||void 0===j?void 0:j.invoiceNumber,name:"invoiceNumber",type:"number",placeholder:"Enter Invoice Number",fontWeight:"500"}),(0,A.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",p.invoiceNumber&&g.invoiceNumber&&p.invoiceNumber]})]}),(0,A.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,A.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Title"}),(0,A.jsx)(D.Input,{fontSize:"sm",onChange:f,onBlur:b,value:null===j||void 0===j?void 0:j.title,name:"title",placeholder:"Enter Title",fontWeight:"500"}),(0,A.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",p.title&&g.title&&p.title]})]}),(0,A.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,A.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Status"}),(0,A.jsxs)(z.l6,{value:j.status,name:"status",onChange:f,mb:p.status&&g.status?void 0:"10px",fontWeight:"500",placeholder:"Status",borderColor:p.status&&g.status?"red.300":null,children:[(0,A.jsx)("option",{value:"Paid",children:"Paid"}),(0,A.jsx)("option",{value:"Unpaid",children:"Unpaid"}),(0,A.jsx)("option",{value:"Cancelled",children:"Cancelled"})]}),(0,A.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",p.status&&g.status&&p.status]})]}),(0,A.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,A.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Contact Name"}),(0,A.jsx)(D.Input,{fontSize:"sm",onChange:f,onBlur:b,value:null===j||void 0===j?void 0:j.contactName,name:"contactName",placeholder:"Enter Contact Name",fontWeight:"500"}),(0,A.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",p.contactName&&g.contactName&&p.contactName]})]}),(0,A.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,A.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Account Name"}),(0,A.jsx)(D.Input,{fontSize:"sm",onChange:f,onBlur:b,value:null===j||void 0===j?void 0:j.accountName,name:"accountName",placeholder:"Enter Account Name",fontWeight:"500"}),(0,A.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",p.accountName&&g.accountName&&p.accountName]})]}),(0,A.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,A.jsx)(k.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"600",color:"#000",mb:"0",mt:2,children:"Grand Total"}),(0,A.jsx)(D.Input,{fontSize:"sm",onChange:f,onBlur:b,value:null===j||void 0===j?void 0:j.grandTotal,name:"grandTotal",placeholder:"Enter Grand Total",fontWeight:"500"}),(0,A.jsxs)(a.Text,{mb:"10px",color:"red",children:[" ",p.grandTotal&&g.grandTotal&&p.grandTotal]})]})]})}),(0,A.jsxs)(T.jl,{children:[(0,A.jsx)(s.Button,{size:"sm",variant:"brand",mr:2,onClick:y,disabled:!(!o&&I),children:o?(0,A.jsx)(w.A,{}):"Search"}),(0,A.jsx)(s.Button,{size:"sm",variant:"outline",colorScheme:"red",onClick:()=>C(),children:"Clear"})]})]})]})})};var $=i(32892),B=i(4448);const P=e=>{var l,i,n;const{onClose:a,isOpen:o,id:d,generatePDF:r,selectedId:c,isLoading:x}=e,[m,p]=(0,v.useState)({}),[j,b]=(0,v.useState)(!1),f=(0,h.d4)((e=>{var l,i;return null===e||void 0===e||null===(l=e.images)||void 0===l||null===(i=l.images)||void 0===i?void 0:i.filter((e=>!0===(null===e||void 0===e?void 0:e.isActive)))}));return(0,v.useEffect)((()=>{c&&(async()=>{try{b(!0);let l=await(0,g.x4)("api/invoices/view/",c);var e;200===(null===l||void 0===l?void 0:l.status)&&p(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.result)}catch(l){console.log(l)}finally{b(!1)}})()}),[c]),(0,A.jsx)(T._s,{isOpen:o,size:"lg",children:(0,A.jsxs)(T.zj,{children:[(0,A.jsxs)(T.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["Invoice",(0,A.jsx)(s.IconButton,{onClick:()=>a(!1),icon:(0,A.jsx)(t.CloseIcon,{})})]}),(0,A.jsx)(T.ys,{children:j?(0,A.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(B.y,{})}):(0,A.jsx)("div",{id:d,style:{padding:"5px"},children:(0,A.jsxs)("div",{className:"invoice-container",children:[(0,A.jsx)("div",{style:{marginBottom:10},children:(0,A.jsx)("h1",{style:{fontSize:30,textAlign:"center"},children:"Invoice"})}),(0,A.jsxs)("div",{className:"invoice-header",children:[(0,A.jsx)("div",{children:(0,A.jsx)($._V,{style:{width:"100%",height:"52px"},src:null===(l=f[0])||void 0===l?void 0:l.logoLgImg,alt:"Logo",cursor:"pointer",userSelect:"none",my:2})}),(0,A.jsx)("div",{className:"invoice-details",children:(0,A.jsxs)("table",{children:[(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Invoice No."}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:null===m||void 0===m?void 0:m.invoiceNumber})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Invoice Date"}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:(null===m||void 0===m?void 0:m.invoiceDate)&&u()(null===m||void 0===m?void 0:m.invoiceDate).format("DD-MM-YYYY")})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Name"}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:null===m||void 0===m?void 0:m.title})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Status"}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:null===m||void 0===m?void 0:m.status})]})]})})]}),(0,A.jsxs)("div",{className:"address-section",children:[(0,A.jsxs)("div",{className:"address",children:[(0,A.jsx)("strong",{children:"Billing Address"}),(0,A.jsx)("br",{}),(0,A.jsx)("p",{style:{width:"250px",wordBreak:"break-all"},children:null!==m&&void 0!==m&&m.billingStreet?`${null===m||void 0===m?void 0:m.billingStreet},${null===m||void 0===m?void 0:m.billingCity},`:""}),(0,A.jsx)("p",{style:{width:"250px",wordBreak:"break-all"},children:null!==m&&void 0!==m&&m.billingState?`${null===m||void 0===m?void 0:m.billingState},`:""}),(0,A.jsx)("p",{style:{width:"250px",wordBreak:"break-all"},children:`${null===m||void 0===m?void 0:m.billingCountry} - ${null===m||void 0===m?void 0:m.billingPostalCode}`})]}),(0,A.jsxs)("div",{className:"address",children:[(0,A.jsx)("strong",{children:"Shipping Address"}),(0,A.jsx)("br",{}),(0,A.jsx)("p",{style:{width:"250px",wordBreak:"break-all"},children:null!==m&&void 0!==m&&m.shippingStreet?`${null===m||void 0===m?void 0:m.shippingStreet},${null===m||void 0===m?void 0:m.shippingCity},`:""}),(0,A.jsx)("p",{style:{width:"250px",wordBreak:"break-all"},children:null!==m&&void 0!==m&&m.shippingState?`${null===m||void 0===m?void 0:m.shippingState},`:""}),(0,A.jsx)("p",{style:{width:"250px",wordBreak:"break-all"},children:`${null===m||void 0===m?void 0:m.shippingCountry} - ${null===m||void 0===m?void 0:m.shippingPostalCode}`})]})]}),(0,A.jsxs)("table",{className:"invoice-table",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{width:"50px"},children:"S No"}),(0,A.jsx)("th",{style:{width:"100px"},children:"ITEM"}),(0,A.jsx)("th",{style:{width:"50px"},children:"QTY"}),(0,A.jsx)("th",{style:{width:"50px"},children:"RATE"}),(0,A.jsx)("th",{style:{width:"50px"},children:"DISCOUNT"}),(0,A.jsx)("th",{style:{width:"50px"},children:"AMOUNT"})]})}),(0,A.jsx)("tbody",{children:(null===m||void 0===m||null===(i=m.items)||void 0===i?void 0:i.length)>0&&(null===m||void 0===m||null===(n=m.items)||void 0===n?void 0:n.map(((e,l)=>(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:null===e||void 0===e?void 0:e.id}),(0,A.jsx)("td",{children:null===e||void 0===e?void 0:e.productName}),(0,A.jsx)("td",{children:null===e||void 0===e?void 0:e.qty}),(0,A.jsx)("td",{children:null===e||void 0===e?void 0:e.rate}),(0,A.jsx)("td",{children:`${"percent"===(null===e||void 0===e?void 0:e.discountType)?`${null===e||void 0===e?void 0:e.discount}%`:"flatAmount"===(null===e||void 0===e?void 0:e.discountType)?`${null===m||void 0===m?void 0:m.currency}${null===e||void 0===e?void 0:e.discount}`:"none"===(null===e||void 0===e?void 0:e.discountType)?0:""}`}),(0,A.jsx)("td",{children:null===e||void 0===e?void 0:e.amount})]},l))))})]}),(0,A.jsx)("div",{className:"totals",children:(0,A.jsxs)("table",{children:[(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Total"}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:`${null===m||void 0===m?void 0:m.currency} ${(null===m||void 0===m?void 0:m.total)||0}`})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Discount "}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:`${null===m||void 0===m?void 0:m.currency} ${(null===m||void 0===m?void 0:m.discount)||0}`})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Subtotal"}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:`${null===m||void 0===m?void 0:m.currency} ${(null===m||void 0===m?void 0:m.subtotal)||0}`})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Shipping "}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:`${null===m||void 0===m?void 0:m.currency} ${(null===m||void 0===m?void 0:m.shipping)||0}`})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Shipping Tax"}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:`${null===m||void 0===m?void 0:m.currency} ${(null===m||void 0===m?void 0:m.shippingTax)||0}`})]}),(0,A.jsxs)("tr",{children:[(0,A.jsxs)("th",{style:{textAlign:"start"},children:["Tax (",null===m||void 0===m?void 0:m.ptax,"%)"]}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:`${null===m||void 0===m?void 0:m.currency} ${(null===m||void 0===m?void 0:m.tax)||0}`})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{style:{textAlign:"start"},children:"Grand Total"}),(0,A.jsx)("td",{children:":"}),(0,A.jsx)("td",{style:{textAlign:"start"},children:`${null===m||void 0===m?void 0:m.currency} ${(null===m||void 0===m?void 0:m.grandTotal)||0}`})]})]})}),(0,A.jsx)("div",{className:"footer",children:(0,A.jsx)("div",{children:null===m||void 0===m?void 0:m.description})})]})})}),(0,A.jsx)(T.tb,{children:(0,A.jsx)(s.Button,{sx:{textTransform:"capitalize"},size:"sm",disabled:x,variant:"brand",type:"submit",onClick:r,children:x?(0,A.jsx)(B.y,{}):"Download"})})]})})};var H=i(24966);const V=e=>{const[l,i]=(0,v.useState)(!1),{isOpen:d,onOpen:c,onClose:T}=(0,n.j1)(),[w,N]=(0,v.useState)([]),[C,_]=(0,v.useState)(!1),[k,D]=(0,v.useState)([]),[z,F]=(0,v.useState)(""),$=JSON.parse(localStorage.getItem("user")),B=(0,m.Zp)(),V=(0,h.wA)(),[W,G]=(0,v.useState)(!1),[M,E]=(0,v.useState)(!1),[Y,L]=(0,v.useState)([]),[U,q]=(0,v.useState)(!1),[R,Q]=(0,v.useState)([]),[J,X]=(0,v.useState)(),[Z,K]=(0,v.useState)(),[ee,le]=(0,v.useState)(!1),[ie,te]=(0,v.useState)(!1),[ne,ae]=(0,v.useState)(""),[oe,se]=(0,v.useState)(!1),[de,re]=(0,v.useState)(!1),[ce,ue,ve]=(0,f.h)(["Invoices","Account","Contacts"]),xe={Header:"Action",accessor:"action",isSortable:!1,center:!0,cell:e=>{let{row:l,i:i}=e;return(0,A.jsx)(a.Text,{fontSize:"md",fontWeight:"900",textAlign:"center",children:(0,A.jsxs)(o.W1,{isLazy:!0,children:[(0,A.jsx)(o.IU,{children:(0,A.jsx)(x.txp,{})}),(0,A.jsxs)(o.cO,{minW:"fit-content",transform:"translate(1520px, 173px);",children:[(null===ce||void 0===ce?void 0:ce.update)&&(0,A.jsx)(o.Dr,{py:2.5,icon:(0,A.jsx)(t.EditIcon,{fontSize:15,mb:1}),onClick:()=>{var e;ae("edit"),c(),X(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id)},children:"Edit"}),(null===ce||void 0===ce?void 0:ce.view)&&(0,A.jsx)(o.Dr,{py:2.5,color:"green",icon:(0,A.jsx)(t.ViewIcon,{mb:1,fontSize:15}),onClick:()=>{var e;B(`/invoicesView/${null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id}`)},children:"View"}),(0,A.jsx)(o.Dr,{py:2.5,color:"black",icon:(0,A.jsx)(H.y4Q,{mb:1,fontSize:15}),onClick:()=>{var e;X(null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id),re(!0)},children:"Invoice"}),(null===ce||void 0===ce?void 0:ce.delete)&&(0,A.jsx)(o.Dr,{py:2.5,color:"red",icon:(0,A.jsx)(t.DeleteIcon,{fontSize:15,mb:1}),onClick:()=>{var e;le(!0),N([null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e._id])},children:"Delete"})]})]})})}},he=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Invoice Number",accessor:"invoiceNumber",isSortable:!1,width:10},{Header:"Title",accessor:"title",cell:e=>(0,A.jsx)("div",{className:"selectOpt",children:(0,A.jsx)(a.Text,{onClick:()=>{var l;return me(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.original._id)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})},{Header:"Status",accessor:"status"},{Header:"Contact",accessor:"contact",cell:e=>{var l,i,t,n,o,s,d,r;return"superAdmin"===$.role||null!==ve&&void 0!==ve&&ve.view?(0,A.jsx)("div",{className:"selectOpt",children:(0,A.jsx)(a.Text,{onClick:()=>{var l,i;return B(null!==(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.original.contact)&&`/contactView/${null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.contact}`)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&null!==(l=e.row)&&void 0!==l&&null!==(i=l.original)&&void 0!==i&&i.contactName?null===e||void 0===e||null===(t=e.row)||void 0===t||null===(n=t.original)||void 0===n?void 0:n.contactName:"-"})}):(0,A.jsx)(a.Text,{children:null!==e&&void 0!==e&&null!==(o=e.row)&&void 0!==o&&null!==(s=o.original)&&void 0!==s&&s.contactName?null===e||void 0===e||null===(d=e.row)||void 0===d||null===(r=d.original)||void 0===r?void 0:r.contactName:"-"})}},{Header:"Account",accessor:"account",cell:e=>{var l,i,t,n,o,s,d,r;return"superAdmin"===$.role||null!==ue&&void 0!==ue&&ue.view?(0,A.jsx)("div",{className:"selectOpt",children:(0,A.jsx)(a.Text,{onClick:()=>{var l,i;return B(null!==(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.original.account)&&`/accountView/${null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original.account}`)},me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"brand.600",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&null!==(l=e.row)&&void 0!==l&&null!==(i=l.original)&&void 0!==i&&i.accountName?null===e||void 0===e||null===(t=e.row)||void 0===t||null===(n=t.original)||void 0===n?void 0:n.accountName:"-"})}):(0,A.jsx)(a.Text,{children:null!==e&&void 0!==e&&null!==(o=e.row)&&void 0!==o&&null!==(s=o.original)&&void 0!==s&&s.accountName?null===e||void 0===e||null===(d=e.row)||void 0===d||null===(r=d.original)||void 0===r?void 0:r.accountName:"-"})}},{Header:"Grand Total",accessor:"grandTotal",cell:e=>{var l,i,t,n,o,s;return(0,A.jsx)("div",{className:"selectOpt",children:(0,A.jsx)(a.Text,{children:null!==e&&void 0!==e&&null!==(l=e.row)&&void 0!==l&&null!==(i=l.original)&&void 0!==i&&i.grandTotal?`${null===e||void 0===e||null===(t=e.row)||void 0===t||null===(n=t.original)||void 0===n?void 0:n.currency} ${null===e||void 0===e||null===(o=e.row)||void 0===o||null===(s=o.original)||void 0===s?void 0:s.grandTotal}`:"-"})})}},...null!==ce&&void 0!==ce&&ce.update||null!==ce&&void 0!==ce&&ce.view||null!==ce&&void 0!==ce&&ce.delete?[xe]:[]],me=e=>{B(`/invoicesView/${e}`)},[pe,ge]=(0,v.useState)([...he]),[je,be]=(0,v.useState)([...he]);null===he||void 0===he||he.filter((e=>null===je||void 0===je?void 0:je.find((l=>(null===l||void 0===l?void 0:l.Header)===e.Header))));return(0,v.useEffect)((()=>{(async()=>{G(!0);const e=await V((0,y.b)());var l;200===e.payload.status?L(null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.data):p.oR.error("Failed to fetch data","error"),G(!1)})()}),[l]),(0,A.jsxs)("div",{children:[(0,A.jsx)(b.A,{title:"Invoices",isLoding:W,columnData:null!==pe&&void 0!==pe?pe:[],allData:null!==Y&&void 0!==Y?Y:[],tableData:Y,searchDisplay:U,setSearchDisplay:q,searchedDataOut:R,setSearchedDataOut:Q,tableCustomFields:[],access:ce,setIsImport:se,onOpen:()=>{c(),ae("add")},selectedValues:w,setSelectedValues:N,setDelete:le,deleteMany:!1,AdvanceSearch:(0,A.jsx)(s.Button,{variant:"outline",colorScheme:"brand",leftIcon:(0,A.jsx)(t.SearchIcon,{}),mt:{sm:"5px",md:"0"},size:"sm",onClick:()=>_(!0),children:"Advance Search"}),getTagValuesOutSide:k,searchboxOutside:z,setGetTagValuesOutside:D,setSearchboxOutside:F,handleSearchType:"InvoiceSearch"}),(0,A.jsx)(O,{advanceSearch:C,setAdvanceSearch:_,setSearchedData:Q,setDisplaySearchData:q,allData:null!==Y&&void 0!==Y?Y:[],setAction:i,setGetTagValues:D,setSearchbox:F}),(0,A.jsx)(P,{isOpen:de,onClose:re,generatePDF:()=>{E(!0);const e=document.getElementById("reports");e?r()().from(e).set({margin:[0,0,0,0],filename:`Invoice_${u()().format("DD-MM-YYYY")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,allowTaint:!0},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).save().then((()=>{E(!1),re(!1)})):(console.error("Element with ID 'reports' not found."),E(!1))},id:"reports",selectedId:J,isLoading:M}),(0,A.jsx)(S.A,{isOpen:d,size:"lg",onClose:T,setAction:i,type:ne,selectedId:J,action:l}),(0,A.jsx)(j.A,{isOpen:ee,onClose:()=>le(!1),type:"Invoices",handleDeleteData:async e=>{try{G(!0),200===(await(0,g.Vn)("api/invoices/deleteMany",e)).status&&(p.oR.success("Invoices Delete successfully"),N([]),le(!1),i((e=>!e)))}catch(l){console.log(l),p.oR.error("server error")}finally{G(!1)}},ids:w}),(0,A.jsx)(I,{text:"Invoices file",isOpen:oe,onClose:se,customFields:[{name:"invoiceNumber",label:"Invoice Number",type:"number",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"669508bc20a9be3594c8652f"},{name:"",value:"",_id:"669508bc20a9be3594c86530"}],validation:[{require:!0,message:"Quote Number is required",_id:"669508bc20a9be3594c86531"},{min:!1,value:"",message:"",_id:"669508bc20a9be3594c86532"},{max:!1,value:"",message:"",_id:"669508bc20a9be3594c86533"},{value:"",message:"",match:!1,_id:"669508bc20a9be3594c86534"},{message:"",formikType:"",_id:"669508bc20a9be3594c86535"}],_id:"669508bc20a9be3594c8652e"},{name:"title",label:"Title",type:"text",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"669508f820a9be3594c8686c"},{name:"",value:"",_id:"669508f820a9be3594c8686d"}],validation:[{require:!0,message:"Title is required ",_id:"669508f820a9be3594c8686e"},{min:!1,value:"",message:"",_id:"669508f820a9be3594c8686f"},{max:!1,value:"",message:"",_id:"669508f820a9be3594c86870"},{value:"",message:"",match:!1,_id:"669508f820a9be3594c86871"},{message:"",formikType:"",_id:"669508f820a9be3594c86872"}],_id:"669508f820a9be3594c8686b"},{name:"status",label:"Status",type:"select",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[],validation:[{require:!1,message:"",_id:"6695095120a9be3594c86bc9"},{min:!1,value:"",message:"",_id:"6695095120a9be3594c86bca"},{max:!1,value:"",message:"",_id:"6695095120a9be3594c86bcb"},{value:"",message:"",match:!1,_id:"6695095120a9be3594c86bcc"},{message:"",formikType:"",_id:"6695095120a9be3594c86bcd"}],_id:"6695095120a9be3594c86bc0"},{name:"contact",label:"Contact",type:"text",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"6695099520a9be3594c86f46"},{name:"",value:"",_id:"6695099520a9be3594c86f47"}],validation:[{require:!1,message:"",_id:"6695099520a9be3594c86f48"},{min:!1,value:"",message:"",_id:"6695099520a9be3594c86f49"},{max:!1,value:"",message:"",_id:"6695099520a9be3594c86f4a"},{value:"",message:"",match:!1,_id:"6695099520a9be3594c86f4b"},{message:"",formikType:"",_id:"6695099520a9be3594c86f4c"}],_id:"6695099520a9be3594c86f45"},{name:"account",label:"Account",type:"text",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"669509a320a9be3594c872dd"},{name:"",value:"",_id:"669509a320a9be3594c872de"}],validation:[{require:!1,message:"",_id:"669509a320a9be3594c872df"},{min:!1,value:"",message:"",_id:"669509a320a9be3594c872e0"},{max:!1,value:"",message:"",_id:"669509a320a9be3594c872e1"},{value:"",message:"",match:!1,_id:"669509a320a9be3594c872e2"},{message:"",formikType:"",_id:"669509a320a9be3594c872e3"}],_id:"669509a320a9be3594c872dc"},{name:"grandTotal",label:"Grand Total",type:"number",fixed:!1,isDefault:!1,delete:!1,belongsTo:null,backendType:"Mixed",isTableField:!1,isView:!1,options:[{name:"",value:"",_id:"669509b120a9be3594c8768c"},{name:"",value:"",_id:"669509b120a9be3594c8768d"}],validation:[{require:!1,message:"",_id:"669509b120a9be3594c8768e"},{min:!1,value:"",message:"",_id:"669509b120a9be3594c8768f"},{max:!1,value:"",message:"",_id:"669509b120a9be3594c87690"},{value:"",message:"",match:!1,_id:"669509b120a9be3594c87691"},{message:"",formikType:"",_id:"669509b120a9be3594c87692"}],_id:"669509b120a9be3594c8768b"}]})]})}},23848:(e,l,i)=>{i.d(l,{A:()=>r});var t=i(31206),n=i(4450),a=i(3458),o=i(71997),s=i(27149),d=i(70579);function r(e){const{count:l,text:i,onFileSelect:r}=e,c=(0,t.dU)("secondaryGray.900","white"),u=(0,t.dU)("brand.500","white");return(0,d.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:2,children:[(0,d.jsx)(n.GridItem,{colSpan:{base:12},children:(0,d.jsx)(o.A,{w:{base:"100%"},me:"36px",minH:200,img:"Property Photos"===i?"img":"",csv:"csv",height:"100%",onFileSelect:r,isMultipleAllow:!1,content:(0,d.jsxs)(n.Box,{children:[(0,d.jsx)(a.In,{as:s.vpy,w:"80px",h:"80px",color:u}),(0,d.jsx)(n.Flex,{justify:"center",mx:"auto",mb:"12px",children:(0,d.jsx)(n.Text,{fontSize:"xl",fontWeight:"700",color:u,children:"Upload File"})}),l>0&&(0,d.jsxs)(n.Text,{fontSize:"sm",fontWeight:"500",color:"secondaryGray.500",children:["Selected Files : ",l]})]})})}),(0,d.jsx)(n.GridItem,{colSpan:{base:12},children:(0,d.jsxs)(n.Flex,{direction:"column",children:[(0,d.jsxs)(n.Text,{color:c,fontWeight:"bold",textAlign:"start",fontSize:"2xl",mt:{base:"20px"},children:["Upload ",i]}),(0,d.jsx)(n.Text,{color:"gray.400",fontSize:"md",my:{base:"auto"},mx:"auto",textAlign:"start",children:"Accepted File Type (csv, xlsx file - 15MB max) only 1 file"})]})})]})}},41046:(e,l,i)=>{i.d(l,{A:()=>h});var t=i(31206),n=i(4450),a=i(71778),o=i(35066),s=i(65043),d=i(71094),r=i(10216),c=i(76914),u=i(78152),v=i(85369),x=i(70579);function h(e){const{columnsData:l,tableData:i,title:h,type:m,selectedValues:p,setSelectedValues:g}=e,j=(0,s.useMemo)((()=>l),[l]),b=(0,s.useMemo)((()=>i),[i]),[f,y]=(JSON.parse(localStorage.getItem("user")),(0,s.useState)()),S=(0,d.useTable)({columns:j,data:b,initialState:{pageIndex:0}},d.useGlobalFilter,d.useSortBy,d.usePagination),{getTableProps:T,getTableBodyProps:w,headerGroups:N,prepareRow:C,page:A,canPreviousPage:I,canNextPage:_,pageOptions:k,pageCount:D,gotoPage:z,nextPage:F,previousPage:O,setPageSize:$,state:{pageIndex:B,pageSize:P}}=S;k.length<f&&y(k.length);const H=(0,t.dU)("gray.500","white"),V=(0,t.dU)("gray.200","whiteAlpha.100"),W=(e,l)=>{"multi"===m?e.target.checked?g((e=>[...e,l])):g((e=>e.filter((e=>e!==l)))):e.target.checked?g(l):g(null)};return(0,x.jsxs)(r.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,x.jsx)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,x.jsxs)(n.Text,{color:H,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[h,"  (",(0,x.jsx)(c.A,{targetNumber:null===b||void 0===b?void 0:b.length},null===b||void 0===b?void 0:b.length),")"]})}),(0,x.jsxs)(n.Box,{overflowY:"auto",className:"table-container-property",children:["+ +        ",(0,x.jsxs)(a.XI,{...T(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,x.jsx)(a.d8,{zIndex:1,children:null===N||void 0===N?void 0:N.map(((e,l)=>(0,s.createElement)(a.Tr,{...e.getHeaderGroupProps(),key:l},e.headers.map(((e,l)=>(0,s.createElement)(a.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:l,borderColor:V},(0,x.jsxs)(n.Flex,{align:"center",justifyContent:e.center?"center":"start",fontSize:{sm:"14px",lg:"16px"},color:" secondaryGray.900",children:[(0,x.jsx)("span",{style:{textTransform:"capitalize",marginRight:"8px"},children:e.render("Header")}),!1!==e.isSortable&&(0,x.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,x.jsx)(v.GOR,{}):(0,x.jsx)(v.XhJ,{}):(0,x.jsx)(v.MjW,{})})]})))))))}),(0,x.jsxs)(a.NN,{...w(),children:[0===(null===b||void 0===b?void 0:b.length)&&+ +(0,x.jsx)(a.Tr,{children:(0,x.jsx)(a.Td,{colSpan:j.length,children:"img"})}),null===A||void 0===A?void 0:A.map(((e,l)=>{var i;return C(e),(0,s.createElement)(a.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(i=e.cells)||void 0===i?void 0:i.map(((e,l)=>{let i="";var t;"#"===(null===e||void 0===e?void 0:e.column.Header)?i=(0,x.jsxs)(n.Flex,{align:"center",children:["multi"===m?(0,x.jsx)(o.Sc,{colorScheme:"brandScheme",value:p,isChecked:p.includes(null===e||void 0===e?void 0:e.value),onChange:l=>W(l,null===e||void 0===e?void 0:e.value),me:"10px"}):(0,x.jsx)(o.Sc,{colorScheme:"brandScheme",value:p,isChecked:p===(null===e||void 0===e?void 0:e.value),onChange:l=>W(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,x.jsx)(n.Text,{color:H,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.index)+1})]}):"title"===(null===e||void 0===e?void 0:e.column.Header)||"first Name"===(null===e||void 0===e?void 0:e.column.Header)||"last Name"===(null===e||void 0===e?void 0:e.column.Header)?i=(0,x.jsx)(n.Text,{me:"10px",color:H,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"phone Number"===(null===e||void 0===e?void 0:e.column.Header)||"Email Address"===(null===e||void 0===e?void 0:e.column.Header)?i=(0,x.jsx)(n.Text,{fontSize:"sm",fontWeight:"700",color:H,children:null===e||void 0===e?void 0:e.value}):("physical Address"===(null===e||void 0===e?void 0:e.column.Header)||"mailing Address"===(null===e||void 0===e?void 0:e.column.Header)||"Contact Method"===(null===e||void 0===e?void 0:e.column.Header))&&(i=(0,x.jsx)(n.Text,{color:H,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,s.createElement)(a.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},i)})))}))]})]})]}),(null===b||void 0===b?void 0:b.length)>5&&(0,x.jsx)(u.A,{gotoPage:z,gopageValue:f,setGopageValue:y,pageCount:D,canPreviousPage:I,previousPage:O,canNextPage:_,pageOptions:k,setPageSize:$,nextPage:F,pageSize:P,pageIndex:B})]})}},49565:(e,l,i)=>{i.d(l,{A:()=>h});var t=i(57360),n=i(4450),a=i(22554),o=i(65043),s=(i(41046),i(19488)),d=i(8860),r=i(88031),c=i(20850),u=i(26547),v=i(97508),x=i(70579);const h=e=>{var l,i;const{onClose:h,isOpen:m,fieldName:p,setFieldValue:g,data:j}=e,[b,f]=(0,o.useState)(),[y,S]=(0,o.useState)([]),[T,w]=(0,o.useState)(!1),[N,C]=(0,o.useState)([]),A=(0,v.wA)();return(0,o.useEffect)((async()=>{await A((0,u.h)()),(async()=>{var e,l,i,t;w(!0);const n=await A((0,c.I)());S(null===n||void 0===n||null===(e=n.payload)||void 0===e?void 0:e.data);const a=[{Header:"#",accessor:"_id",isSortable:!1,width:10},...((null===n||void 0===n||null===(l=n.payload)||void 0===l||null===(i=l.data)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.fields)||[]).filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))).map((e=>({Header:null===e||void 0===e?void 0:e.label,accessor:null===e||void 0===e?void 0:e.name})))];C(a),w(!1)})()}),[]),(0,x.jsxs)(t.aF,{onClose:h,size:"full",isOpen:m,children:[(0,x.jsx)(t.mH,{}),(0,x.jsxs)(t.$m,{children:[(0,x.jsx)(t.rQ,{children:"Select Contact"}),(0,x.jsx)(t.s_,{}),(0,x.jsx)(t.cw,{children:T?(0,x.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,x.jsx)(s.A,{})}):(0,x.jsx)(r.A,{title:"Contacts",isLoding:T,columnData:null!==N&&void 0!==N?N:[],allData:null!==j&&void 0!==j?j:[],tableData:j,tableCustomFields:(null===y||void 0===y||null===(l=y[0])||void 0===l||null===(i=l.fields)||void 0===i?void 0:i.filter((e=>!0===(null===e||void 0===e?void 0:e.isTableField))))||[],AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:b,setSelectedValues:f,selectType:"single",customSearch:!1})}),(0,x.jsxs)(t.jl,{children:[(0,x.jsxs)(a.Button,{variant:"brand",size:"sm",me:2,onClick:async()=>{try{w(!0),g(p,b),h()}catch(e){console.log(e)}finally{w(!1)}},disabled:!!T,leftIcon:(0,x.jsx)(d.NLY,{}),children:[" ",T?(0,x.jsx)(s.A,{}):"Select"]}),(0,x.jsx)(a.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>h(),children:"Close"})]})]})]})}},53186:(e,l,i)=>{i.d(l,{T:()=>r});var t=i(78510),n=i(59522),a=i(23216),o=i(65043);function s(){return s=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var i=arguments[l];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},s.apply(this,arguments)}var d=["className","rows"],r=(0,n.Rf)((function(e,l){var i=(0,n.Vl)("Textarea",e),r=(0,n.MN)(e),c=r.className,u=r.rows,v=function(e,l){if(null==e)return{};var i,t,n={},a=Object.keys(e);for(t=0;t<a.length;t++)i=a[t],l.indexOf(i)>=0||(n[i]=e[i]);return n}(r,d),x=(0,t.useFormControl)(v),h=u?(0,a.cJ)(i,["h","minH","height","minHeight"]):i;return o.createElement(n.Bv.textarea,s({ref:l,rows:u},x,{className:(0,a.cx)("chakra-textarea",c),__css:h}))}));a.gt&&(r.displayName="Textarea")}}]);
//# sourceMappingURL=4387.cb0faab4.chunk.js.map