"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[2412],{12312:(e,o,t)=>{t.d(o,{A:()=>p});var n=t(57360),l=t(4450),i=t(22554),s=t(65043),r=t(19488),a=t(8860),d=t(88031),c=t(97508),u=(t(79621),t(30390),t(47503),t(70579));const p=e=>{const{onClose:o,isOpen:t,fieldName:p,setFieldValue:m,data:x,type:h,billingState:j,billingCity:v,billingPostalCode:f,billingCountry:S,billingStreet:y}=e,[b,g]=((0,c.wA)(),(0,s.useState)(!1)),[C,N]=(0,s.useState)([]),[A,z]=(0,s.useState)([]),I=((null===x||void 0===x?void 0:x.length)>0&&(null===x||void 0===x||x.find((e=>(null===e||void 0===e?void 0:e._id)===A))),[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Account Name",accessor:"name"},{Header:"Office Phone",accessor:"officePhone"},{Header:"Fax",accessor:"fax"},{Header:"Email Address",accessor:"emailAddress"}]);return(0,u.jsxs)(n.aF,{onClose:o,size:"full",isOpen:t,children:[(0,u.jsx)(n.mH,{}),(0,u.jsxs)(n.$m,{children:[(0,u.jsx)(n.rQ,{children:"Select Account"}),(0,u.jsx)(n.s_,{}),(0,u.jsx)(n.cw,{children:b?(0,u.jsx)(l.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(r.A,{})}):(0,u.jsx)(d.A,{title:"Account",isLoding:b,columnData:null!==I&&void 0!==I?I:[],allData:null!==x&&void 0!==x?x:[],tableData:x,AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:A,setSelectedValues:z,selectType:"single",customSearch:!1})}),(0,u.jsxs)(n.jl,{children:[(0,u.jsxs)(i.Button,{variant:"brand",size:"sm",me:2,disabled:!!b,leftIcon:(0,u.jsx)(a.NLY,{}),onClick:async()=>{try{g(!0),m(p,A),o()}catch(e){console.log(e)}finally{g(!1)}},children:[" ",b?(0,u.jsx)(r.A,{}):"Select"]}),(0,u.jsx)(i.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>o(),children:"Close"})]})]})]})}},14614:(e,o,t)=>{t.d(o,{A:()=>p});var n=t(57360),l=t(4450),i=t(22554),s=t(65043),r=t(19488),a=t(8860),d=t(88031),c=(t(87892),t(97508)),u=(t(79621),t(70579));const p=e=>{const{onClose:o,isOpen:t,fieldName:p,setFieldValue:m,data:x,isLoding:h,setIsLoding:j}=e,[v,f]=((0,c.wA)(),(0,s.useState)([])),[S,y]=(0,s.useState)([]),b=[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"email Id",accessor:"username"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"role",accessor:"role"}];return(0,u.jsxs)(n.aF,{onClose:o,size:"full",isOpen:t,children:[(0,u.jsx)(n.mH,{}),(0,u.jsxs)(n.$m,{children:[(0,u.jsx)(n.rQ,{children:"Select User"}),(0,u.jsx)(n.s_,{}),(0,u.jsx)(n.cw,{children:h?(0,u.jsx)(l.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(r.A,{})}):(0,u.jsx)(d.A,{title:"Users",isLoding:h,columnData:null!==b&&void 0!==b?b:[],allData:null!==x&&void 0!==x?x:[],tableData:x,AdvanceSearch:()=>"",ManageGrid:!1,deleteMany:!1,selectedValues:S,setSelectedValues:y,selectType:"single",customSearch:!1})}),(0,u.jsxs)(n.jl,{children:[(0,u.jsxs)(i.Button,{variant:"brand",size:"sm",me:2,disabled:!!h,leftIcon:(0,u.jsx)(a.NLY,{}),onClick:async()=>{try{j(!0),m(p,S),o()}catch(e){console.log(e)}finally{j(!1)}},children:[" ",h?(0,u.jsx)(r.A,{}):"Select"]}),(0,u.jsx)(i.Button,{variant:"outline",size:"sm",colorScheme:"red",onClick:()=>o(),children:"Close"})]})]})]})}},31251:(e,o,t)=>{t.d(o,{_:()=>l});var n=t(80899);const l=n.Ik({opportunityName:n.Yj().required("Opportunity Name Is required"),type:n.Yj(),leadSource:n.Yj(),currency:n.Yj(),opportunityAmount:n.Yj().required("Opportunity Amount Is required"),amount:n.Yj(),expectedCloseDate:n.Yj().required("Expected Close Date Is required"),nextStep:n.Yj(),salesStage:n.Yj().required("Sales Stage Is required"),probability:n.Yj(),description:n.Yj(),createBy:n.Yj()})},32412:(e,o,t)=>{t.d(o,{A:()=>A});var n=t(14034),l=t(57360),i=t(22554),s=t(4450),r=t(78510),a=t(67682),d=t(84626),c=t(53186),u=t(19488),p=t(60446),m=t.n(p),x=t(63516),h=t(65043),j=t(3388),v=t(79621),f=(t(22030),t(48908),t(80899),t(31251)),S=t(14614),y=t(47503),b=t(97508),g=t(12312),C=t(95574),N=t(70579);const A=e=>{const{isOpen:o,size:t,onClose:p,type:A,setAction:z,selectedId:I}=e,[W,B]=(0,h.useState)(!1),[w,F]=(0,h.useState)(!1),[O,D]=(0,h.useState)(!1),[T,L]=(0,h.useState)([]),[P,G]=(0,h.useState)({}),_=(0,b.d4)((e=>{var o,t;return null===e||void 0===e||null===(o=e.accountData)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.data})),k=JSON.parse(localStorage.getItem("user")),[Y]=(0,C.h)(["Account"]),E={opportunityName:"edit"===A?null===P||void 0===P?void 0:P.opportunityName:"",accountName:"edit"===A?null===P||void 0===P?void 0:P.accountName:null,assignUser:"edit"===A?null===P||void 0===P?void 0:P.assignUser:null,type:"edit"===A?null===P||void 0===P?void 0:P.type:"",leadSource:"edit"===A?null===P||void 0===P?void 0:P.leadSource:"",currency:"edit"===A?null===P||void 0===P?void 0:P.currency:"",opportunityAmount:"edit"===A?null===P||void 0===P?void 0:P.opportunityAmount:"",amount:"edit"===A?null===P||void 0===P?void 0:P.amount:"",expectedCloseDate:"edit"===A?null===P||void 0===P?void 0:P.expectedCloseDate:"",nextStep:"edit"===A?null===P||void 0===P?void 0:P.nextStep:"",salesStage:"edit"===A?null===P||void 0===P?void 0:P.salesStage:"",probability:"edit"===A?null===P||void 0===P?void 0:P.probability:"",description:"edit"===A?null===P||void 0===P?void 0:P.description:"",createBy:JSON.parse(localStorage.getItem("user"))._id,modifiedBy:JSON.parse(localStorage.getItem("user"))._id},H=()=>{M.resetForm(),p()},M=(0,x.Wx)({initialValues:E,validationSchema:f._,enableReinitialize:!0,onSubmit:(e,o)=>{let{resetForm:t}=o;if("add"===A)(async e=>{try{B(!0),200===(await(0,v.d_)("api/opportunity/add",e)).status&&(p(),y.oR.success("Opprtunities Save successfully"),M.resetForm(),z((e=>!e)))}catch(o){console.log(o),y.oR.error("server error")}finally{B(!1)}})(e);else{(async e=>{try{B(!0),200===(await(0,v.yP)(`api/opportunity/edit/${I}`,e)).status&&(p(),y.oR.success("Opprtunities Update successfully"),M.resetForm())}catch(o){console.log(o),y.oR.error("server error")}finally{B(!1)}})({...e,modifiedDate:new Date})}}}),{errors:U,touched:V,values:R,handleBlur:q,handleChange:Q,handleSubmit:$,setFieldValue:J}=M;console.log(U);return(0,h.useEffect)((()=>{"superAdmin"===k.role&&(async()=>{var e;B(!0);let o=await(0,v.x4)("api/user/");L(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.user),B(!1)})()}),[]),(0,h.useEffect)((()=>{"edit"===A&&(async()=>{if("edit"===A)try{B(!0);let e=await(0,v.x4)("api/opportunity/view/",I);200===(null===e||void 0===e?void 0:e.status)&&G(null===e||void 0===e?void 0:e.data)}catch(e){console.log(e)}finally{B(!1)}})()}),[A,I]),(0,N.jsxs)("div",{children:[w&&(0,N.jsx)(S.A,{onClose:()=>F(!1),isOpen:w,fieldName:"assignUser",setFieldValue:J,data:T,isLoding:W,setIsLoding:B}),O&&(0,N.jsx)(g.A,{onClose:()=>D(!1),isOpen:O,fieldName:"accountName",setFieldValue:J,data:_}),(0,N.jsxs)(l._s,{isOpen:o,size:t,children:[(0,N.jsx)(l.QP,{}),(0,N.jsxs)(l.zj,{children:[(0,N.jsxs)(l.BE,{alignItems:"center",justifyContent:"space-between",display:"flex",children:["add"===A?"Add":"Edit"," Opportunities",(0,N.jsx)(i.IconButton,{onClick:()=>H(),icon:(0,N.jsx)(n.CloseIcon,{})})]}),(0,N.jsx)(l.ys,{children:(0,N.jsxs)(s.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsxs)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Opportunity Name",(0,N.jsx)(s.Text,{color:"red",children:"*"})]}),(0,N.jsx)(a.Input,{fontSize:"sm",value:R.opportunityName,name:"opportunityName",onBlur:q,onChange:Q,placeholder:"Opportunity Name",fontWeight:"500",borderColor:U.opportunityName&&V.opportunityName?"red.300":null}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.opportunityName&&V.opportunityName&&U.opportunityName]})]}),("superAdmin"===k.role||(null===Y||void 0===Y?void 0:Y.view))&&(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Account Name"}),(0,N.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,N.jsx)(d.l6,{value:R.accountName,name:"accountName",onBlur:q,onChange:Q,mb:U.accountName&&V.accountName?void 0:"10px",fontWeight:"500",placeholder:"Account Name",borderColor:U.accountName&&V.accountName?"red.300":null,children:(null===_||void 0===_?void 0:_.length)>0&&(null===_||void 0===_?void 0:_.map((e=>(0,N.jsx)("option",{value:e._id,children:`${null===e||void 0===e?void 0:e.name}`},e._id))))}),(0,N.jsx)(i.IconButton,{onClick:()=>D(!0),ml:2,fontSize:"25px",icon:(0,N.jsx)(j.G2h,{})})]}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.accountName&&V.accountName&&U.accountName]})]}),"superAdmin"===k.role&&(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Assigned User"}),(0,N.jsxs)(s.Flex,{justifyContent:"space-between",children:[(0,N.jsx)(d.l6,{value:R.assignUser,name:"assignUser",onBlur:q,onChange:Q,mb:U.assignUser&&V.assignUser?void 0:"10px",fontWeight:"500",placeholder:"Assign To",borderColor:U.assignUser&&V.assignUser?"red.300":null,children:null===T||void 0===T?void 0:T.map((e=>(0,N.jsx)("option",{value:e._id,children:`${null===e||void 0===e?void 0:e.firstName} ${null===e||void 0===e?void 0:e.lastName}`},e._id)))}),(0,N.jsx)(i.IconButton,{onClick:()=>F(!0),ml:2,fontSize:"25px",icon:(0,N.jsx)(j.G2h,{})})]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Type"}),(0,N.jsxs)(d.l6,{value:R.type,name:"type",onBlur:q,onChange:Q,mb:U.type&&V.type?void 0:"10px",fontWeight:"500",placeholder:"Select Type",borderColor:U.type&&V.type?"red.300":null,children:[(0,N.jsx)("option",{value:"Existing Bussiness",children:"Existing Bussiness"}),(0,N.jsx)("option",{value:"New Bussiness",children:"New Bussiness"})]}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.type&&V.type&&U.type]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Lead Source"}),(0,N.jsxs)(d.l6,{value:R.leadSource,name:"leadSource",onBlur:q,onChange:Q,mb:U.leadSource&&V.leadSource?void 0:"10px",fontWeight:"500",placeholder:"Select Lead Source",borderColor:U.leadSource&&V.leadSource?"red.300":null,children:[(0,N.jsx)("option",{value:"Cold Call",children:"Cold Call"}),(0,N.jsx)("option",{value:"Existing Customer",children:"Existing Customer"}),(0,N.jsx)("option",{value:"Self Generated",children:"Self Generated"}),(0,N.jsx)("option",{value:"Employee",children:"Employee"}),(0,N.jsx)("option",{value:"Partner",children:"Partner"}),(0,N.jsx)("option",{value:"Public Relation",children:"Public Relation"}),(0,N.jsx)("option",{value:"Direct Mail",children:"Direct Mail"}),(0,N.jsx)("option",{value:"Conference",children:"Conference"}),(0,N.jsx)("option",{value:"Trade Show",children:"Trade Show"}),(0,N.jsx)("option",{value:"Web Site",children:"Web Site"}),(0,N.jsx)("option",{value:"Word Of Mouth",children:"Word Of Mouth"}),(0,N.jsx)("option",{value:"Email",children:"Email"}),(0,N.jsx)("option",{value:"Other",children:"Other"})]}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.leadSource&&V.leadSource&&U.leadSource]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Currency"}),(0,N.jsx)(d.l6,{value:R.currency,name:"currency",onBlur:q,onChange:Q,mb:U.currency&&V.currency?void 0:"10px",fontWeight:"500",placeholder:"Select Currency",borderColor:U.currency&&V.currency?"red.300":null,children:(0,N.jsx)("option",{value:"$",children:"INR"})}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.currency&&V.currency&&U.currency]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsxs)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Opportunity Amount",(0,N.jsx)(s.Text,{color:"red",children:"*"})]}),(0,N.jsx)(a.Input,{fontSize:"sm",value:R.opportunityAmount,name:"opportunityAmount",type:"number",onBlur:q,onChange:Q,placeholder:"Opportunity Amount",fontWeight:"500",borderColor:U.opportunityAmount&&V.opportunityAmount?"red.300":null}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.opportunityAmount&&V.opportunityAmount&&U.opportunityAmount]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Amount"}),(0,N.jsx)(a.Input,{fontSize:"sm",value:R.amount,name:"amount",onBlur:q,onChange:Q,type:"number",placeholder:"Amount",fontWeight:"500",borderColor:U.amount&&V.amount?"red.300":null}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.amount&&V.amount&&U.amount]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsxs)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Expected Close Date",(0,N.jsx)(s.Text,{color:"red",children:"*"})]}),(0,N.jsx)(a.Input,{type:"date",fontSize:"sm",onChange:Q,onBlur:q,value:m()(R.expectedCloseDate).format("YYYY-MM-DD"),name:"expectedCloseDate",fontWeight:"500",borderColor:null!==U&&void 0!==U&&U.expectedCloseDate&&null!==V&&void 0!==V&&V.expectedCloseDate?"red.300":null}),(0,N.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",U.expectedCloseDate&&V.expectedCloseDate&&U.expectedCloseDate]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Next Step"}),(0,N.jsx)(a.Input,{fontSize:"sm",onChange:Q,onBlur:q,value:R.nextStep,name:"nextStep",placeholder:"Next Step",fontWeight:"500",borderColor:U.nextStep&&V.nextStep?"red.300":null}),(0,N.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",U.nextStep&&V.nextStep&&U.nextStep]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsxs)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Sales Stage",(0,N.jsx)(s.Text,{color:"red",children:"*"})]}),(0,N.jsxs)(d.l6,{value:R.salesStage,name:"salesStage",onBlur:q,onChange:Q,mb:U.salesStage&&V.salesStage?void 0:"10px",fontWeight:"500",placeholder:"Select Sales Stage",borderColor:U.salesStage&&V.salesStage?"red.300":null,children:[(0,N.jsx)("option",{value:"Prospecting",children:"Prospecting"}),(0,N.jsx)("option",{value:"Qualification",children:"Qualification"}),(0,N.jsx)("option",{value:"Needs Analysis",children:"Needs Analysis"}),(0,N.jsx)("option",{value:"Value Propositon",children:"Value Propositon"}),(0,N.jsx)("option",{value:"Identifying Decision Makers",children:"Identifying Decision Makers"}),(0,N.jsx)("option",{value:"Perception Analysis",children:"Perception Analysis"}),(0,N.jsx)("option",{value:"Proposal/Price Quote",children:"Proposal/Price Quote"}),(0,N.jsx)("option",{value:"Negotiation/Review",children:"Negotiation/Review"}),(0,N.jsx)("option",{value:"Closed/Won",children:"Closed/Won"}),(0,N.jsx)("option",{value:"Closed/Lost",children:"Closed/Lost"})]}),(0,N.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",U.salesStage&&V.salesStage&&U.salesStage]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Probability"}),(0,N.jsx)(a.Input,{fontSize:"sm",onChange:Q,onBlur:q,value:R.probability,name:"probability",placeholder:"Probability",type:"number",fontWeight:"500",borderColor:U.probability&&V.probability?"red.300":null}),(0,N.jsxs)(s.Text,{fontSize:"sm",mb:"10px",color:"red",children:[" ",U.probability&&V.probability&&U.probability]})]}),(0,N.jsxs)(s.GridItem,{colSpan:{base:12,md:6},children:[(0,N.jsx)(r.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Description"}),(0,N.jsx)(c.T,{fontSize:"sm",value:R.description,name:"description",resize:"none",onBlur:q,onChange:Q,placeholder:"Description",fontWeight:"500",borderColor:U.description&&V.description?"red.300":null}),(0,N.jsxs)(s.Text,{mb:"10px",fontSize:"sm",color:"red",children:[" ",U.description&&V.description&&U.description]})]})]})}),(0,N.jsxs)(l.tb,{children:[(0,N.jsx)(i.Button,{sx:{textTransform:"capitalize"},size:"sm",disabled:!!W,variant:"brand",type:"submit",onClick:$,children:W?(0,N.jsx)(u.A,{}):"Save"}),(0,N.jsx)(i.Button,{variant:"outline",colorScheme:"red",size:"sm",sx:{marginLeft:2,textTransform:"capitalize"},onClick:H,children:"Close"})]})]})]})]})}},53186:(e,o,t)=>{t.d(o,{T:()=>d});var n=t(78510),l=t(59522),i=t(23216),s=t(65043);function r(){return r=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.apply(this,arguments)}var a=["className","rows"],d=(0,l.Rf)((function(e,o){var t=(0,l.Vl)("Textarea",e),d=(0,l.MN)(e),c=d.className,u=d.rows,p=function(e,o){if(null==e)return{};var t,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],o.indexOf(t)>=0||(l[t]=e[t]);return l}(d,a),m=(0,n.useFormControl)(p),x=u?(0,i.cJ)(t,["h","minH","height","minHeight"]):t;return s.createElement(l.Bv.textarea,r({ref:o,rows:u},m,{className:(0,i.cx)("chakra-textarea",c),__css:x}))}));i.gt&&(d.displayName="Textarea")}}]);
//# sourceMappingURL=2412.064f598a.chunk.js.map